import{d as x,r as b,h as y,c as C,a,b as o,u as n,w as d,o as N,e as m,f as j}from"./index-034322f7.js";import{m as v,B as p}from"./button-61e0ee0f.js";import{I as l}from"./Input-ebb3b8b4.js";const A={class:"pt-12 px-4"},B={class:"flex mb-4"},U=a("div",{class:"w-[13rem] text-right mr-2"},"R",-1),k={class:"flex mb-4"},V=a("div",{class:"w-[13rem] text-right mr-2"},"A",-1),S={class:"flex mb-4"},$=a("div",{class:"w-[13rem] text-right mr-2"},"C",-1),O={class:"flex mb-4"},F=a("div",{class:"whitespace-nowrap w-[13rem] text-right mr-2"},"胜平负Rev",-1),I={class:"flex mb-4"},E=a("div",{class:"whitespace-nowrap w-[13rem] text-right mr-2"},"两场比赛比较的Rev",-1),J={class:"flex mb-4"},M=a("div",{class:"whitespace-nowrap w-[13rem] text-right mr-2"},"得分Rev",-1),T={class:"flex mb-4 justify-end"},H=x({__name:"index",setup(q){const f=j(),s=b({R:.12,A:1,C:.13,Rev:400,compareRev:430,scoreRev:200});async function u(){const r=location.origin;let t;try{t=await fetch(`${r}/setting`)}catch(e){v.error(e.message)}if(t){const e=await t.json();e.code===200&&(s.value={...e.data}),e.code!==200&&v.error(e.msg)}}async function _(r){const t=location.origin,i=await(await fetch(`${t}/setting`,{method:"post",body:JSON.stringify(r),headers:{"content-type":"application/json"}})).json();i.code,i.code!==200&&v.error(i.msg)}const R=()=>{f.push({path:"/home"})},h=async()=>{const r={R:"R",A:"A",C:"C",Rev:"胜平负Rev",compareRev:"两场比赛比较的Rev",scoreRev:"得分Rev"};if(Object.keys(s.value).every(e=>{const i=s.value[e],c=parseFloat(`${i}`);return Number.isNaN(c)?(v.error(r[e]+"填写的非法值，无法保存",10),!1):!0})){const e=Object.keys(s.value).reduce((i,c)=>{const g=s.value[c],w=parseFloat(`${g}`);return{...i,[c]:w}},{});await _(e),v.success("设置更新成功"),await u()}};return y(async()=>{await u()}),(r,t)=>(N(),C("div",A,[a("div",B,[U,o(n(l),{value:s.value.R,"onUpdate:value":t[0]||(t[0]=e=>s.value.R=e)},null,8,["value"])]),a("div",k,[V,o(n(l),{value:s.value.A,"onUpdate:value":t[1]||(t[1]=e=>s.value.A=e)},null,8,["value"])]),a("div",S,[$,o(n(l),{value:s.value.C,"onUpdate:value":t[2]||(t[2]=e=>s.value.C=e)},null,8,["value"])]),a("div",O,[F,o(n(l),{value:s.value.Rev,"onUpdate:value":t[3]||(t[3]=e=>s.value.Rev=e)},null,8,["value"])]),a("div",I,[E,o(n(l),{value:s.value.compareRev,"onUpdate:value":t[4]||(t[4]=e=>s.value.compareRev=e)},null,8,["value"])]),a("div",J,[M,o(n(l),{value:s.value.scoreRev,"onUpdate:value":t[5]||(t[5]=e=>s.value.scoreRev=e)},null,8,["value"])]),a("div",T,[o(n(p),{onClick:R,class:"mr-4"},{default:d(()=>[m(" 返回数据页 ")]),_:1}),o(n(p),{onClick:h},{default:d(()=>[m(" 保存 ")]),_:1})])]))}});export{H as default};
