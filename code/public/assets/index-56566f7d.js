import{d as N,r as d,l as T,a3 as V,c as a,b as r,w as l,u as i,o,a as n,F as m,ak as f,e as j,f as A,s as D,m as g,aj as p,ai as h}from"./index-1d0ea574.js";import{o as v,q as x,A as F}from"./index-08a3fbd3.js";import{B as $}from"./button-94f25e6a.js";import"./SearchOutlined-d89ef774.js";const q={class:"flex flex-wrap mb-2"},E={class:"mb-2"},M={class:"flex flex-wrap"},R={class:"flex flex-wrap"},U={class:"flex flex-wrap mb-2"},G={class:"flex flex-wrap mb-2"},H={class:"flex flex-col"},W=N({__name:"index",setup(J){const y=A(),c=["#78a5de","#4fb2a1","#205a13","#186174","#88b00b","#cf4b22","#9e57cd","#238910","#c18fde","#673b84","#760bbb","#557766","#557733","#337755"],S=d([]),b=d([]),L=d([]),I=d([]),B=d([]);let w;async function k(){var t,s;const u=location.origin,e=await(await fetch(`${u}/data?p=${D.password}`)).json();if(e.code!==200){if(g.error((e==null?void 0:e.msg)||"更新出错",20),(e==null?void 0:e.code)===619)return g.info("已停止数据自动更新",10),!1;if((e==null?void 0:e.code)===601)return g.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(e.code===401)return D.password="",localStorage.setItem("ps",""),y.push({path:"/login"}),!1}return(s=(t=e.data)==null?void 0:t.matchData)!=null&&s.length&&(g.success("数据更新成功"),S.value=e.data.matchData,b.value=e.data.message1List,L.value=e.data.message2List,I.value=e.data.message3List,B.value=e.data.message4List),!0}async function z(u,_){try{if(!await u())return}catch{}w=setTimeout(async()=>{try{await z(u,_)}catch{}},_)}const C=()=>{y.push({path:"/setting"})};return T(async()=>{z(async()=>document.hidden?!0:await k(),5*1e3)}),V(()=>{w&&clearTimeout(w)}),(u,_)=>(o(),a("div",null,[r(i(v),{"item-layout":"horizontal","data-source":b.value},{renderItem:l(({item:e})=>[n("div",q,[(o(!0),a(m,null,f(e.split(" "),(t,s)=>(o(),a("div",{style:p({color:c[s],margin:"0 4px"}),class:"whitespace-nowrap"},h(t),5))),256))])]),_:1},8,["data-source"]),r(i(x)),r(i(v),{"item-layout":"horizontal","data-source":L.value},{renderItem:l(({item:e})=>[n("div",E,[n("div",M,[(o(!0),a(m,null,f(e[0].split(" "),(t,s)=>(o(),a("div",{style:p({color:c[s],margin:"0 4px"}),class:"whitespace-nowrap"},h(t),5))),256))]),n("div",R,[(o(!0),a(m,null,f(e[1].split(" "),(t,s)=>(o(),a("div",{style:p({color:c[s],margin:"0 4px"}),class:"whitespace-nowrap"},h(t),5))),256))])])]),_:1},8,["data-source"]),r(i(x)),r(i(v),{"item-layout":"horizontal","data-source":I.value},{renderItem:l(({item:e})=>[n("div",U,[(o(!0),a(m,null,f(e.split(" "),(t,s)=>(o(),a("div",{style:p({color:c[s],margin:"0 4px"}),class:"whitespace-nowrap"},h(t),5))),256))])]),_:1},8,["data-source"]),r(i(x)),r(i(v),{"item-layout":"horizontal","data-source":B.value},{renderItem:l(({item:e})=>[n("div",G,[(o(!0),a(m,null,f(e.split(" "),(t,s)=>(o(),a("div",{style:p({color:c[s],margin:"0 4px"}),class:"whitespace-nowrap"},h(t),5))),256))])]),_:1},8,["data-source"]),r(i(F),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:l(()=>[n("div",H,[r(i($),{class:"my-2",onClick:C},{default:l(()=>[j(" 设置")]),_:1})])]),_:1})]))}});export{W as default};
