import{d as C,r as m,l as N,a3 as T,c as s,b as o,w as u,u as n,o as r,a as c,F as f,ak as p,e as V,f as $,m as h,aj as _,ai as g}from"./index-b2656ed6.js";import{o as x,q as D,A as j}from"./index-cbd27b71.js";import{B as A}from"./button-daff08bc.js";import"./SearchOutlined-18b9f244.js";const F={class:"flex flex-wrap mb-2"},P={class:"mb-2"},R={class:"flex flex-wrap"},U={class:"flex flex-wrap"},q={class:"flex flex-wrap mb-2"},E={class:"flex flex-col"},O=C({__name:"index",setup(M){const I=$(),d=["#78a5de","#4fb2a1","#205a13","#186174","#88b00b","#cf4b22","#9e57cd","#238910","#c18fde","#673b84","#760bbb","#557766","#557733","#337755"],k=m([]),v=m([]),y=m([]),b=m([]);let w;async function z(){var a,B;const l=location.origin,i=new URL(location.href),e=await(await fetch(`${l}/data?username=${i.searchParams.get("username")||""}&password=${i.searchParams.get("password")||""}`)).json();if(e.code!==200){if(h.error((e==null?void 0:e.msg)||"更新出错",20),(e==null?void 0:e.code)===619)return h.info("已停止数据自动更新",10),!1;if((e==null?void 0:e.code)===401)return h.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1}return(B=(a=e.data)==null?void 0:a.matchData)!=null&&B.length&&(h.success("数据更新成功"),k.value=e.data.matchData,v.value=e.data.message1List,y.value=e.data.message2List,b.value=e.data.message3List),!0}async function L(l,i){try{if(!await l())return}catch{}w=setTimeout(async()=>{try{await L(l,i)}catch{}},i)}const S=()=>{I.push({path:"/setting"})};return N(async()=>{L(async()=>document.hidden?!0:await z(),5*1e3)}),T(()=>{w&&clearTimeout(w)}),(l,i)=>(r(),s("div",null,[o(n(x),{"item-layout":"horizontal","data-source":v.value},{renderItem:u(({item:t})=>[c("div",F,[(r(!0),s(f,null,p(t.split(" "),(e,a)=>(r(),s("div",{style:_({color:d[a],margin:"0 4px"}),class:"whitespace-nowrap"},g(e),5))),256))])]),_:1},8,["data-source"]),o(n(D)),o(n(x),{"item-layout":"horizontal","data-source":y.value},{renderItem:u(({item:t})=>[c("div",P,[c("div",R,[(r(!0),s(f,null,p(t[0].split(" "),(e,a)=>(r(),s("div",{style:_({color:d[a],margin:"0 4px"}),class:"whitespace-nowrap"},g(e),5))),256))]),c("div",U,[(r(!0),s(f,null,p(t[1].split(" "),(e,a)=>(r(),s("div",{style:_({color:d[a],margin:"0 4px"}),class:"whitespace-nowrap"},g(e),5))),256))])])]),_:1},8,["data-source"]),o(n(D)),o(n(x),{"item-layout":"horizontal","data-source":b.value},{renderItem:u(({item:t})=>[c("div",q,[(r(!0),s(f,null,p(t.split(" "),(e,a)=>(r(),s("div",{style:_({color:d[a],margin:"0 4px"}),class:"whitespace-nowrap"},g(e),5))),256))])]),_:1},8,["data-source"]),o(n(j),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:u(()=>[c("div",E,[o(n(A),{class:"my-2",onClick:S},{default:u(()=>[V(" 设置")]),_:1})])]),_:1})]))}});export{O as default};
