import{d as H,D as X,A as Z}from"./index-6105a9bb.js";import{d as N,g as T,o as d,c as _,a as u,t as L,u as l,n as ee,b as g,F as P,h as Q,i as y,e as S,q as z,j as J,r as A,k as te,l as se,w as V,f as ie,m as ne,s as O,p as G}from"./index-e0d4ad65.js";import{T as B,D as ae}from"./index-4441b9e8.js";import{_ as K}from"./message.vue_vue_type_script_setup_true_lang-59ddc260.js";import{B as Y}from"./button-05d9a6d4.js";import"./SearchOutlined-1d867aca.js";import"./index-7575f093.js";import"./Input-85a78d91.js";const oe={class:"mb-2"},re={class:"mb-2"},le={class:"mb-2"},ce={class:"flex mb-2"},ue={class:"mr-2"},de={class:"flex mb-2 text-green-500"},me={class:"mr-2"},ve=N({__name:"match",props:{dateTime:null,leagueName:null,tiCaiTeamList:null,num:null,extraTeamList:null},setup(p){const e=p;return T(()=>{if(!e.dateTime)return"";try{const f=["周日","周一","周二","周三","周四","周五","周六"],c=H(e.dateTime,"YYYY-MM-DD HH:mm").day();return f[c]}catch(f){return f.message}}),(f,c)=>{var o,t,n,r;return d(),_("div",null,[u("div",oe,L(e==null?void 0:e.num),1),u("div",re,L(e==null?void 0:e.dateTime),1),u("div",le,L(e==null?void 0:e.leagueName),1),u("div",ce,[u("div",ue,L((o=e==null?void 0:e.tiCaiTeamList)==null?void 0:o[0]),1),u("div",null,L((t=e==null?void 0:e.tiCaiTeamList)==null?void 0:t[1]),1)]),u("div",de,[u("div",me,L((n=e==null?void 0:e.extraTeamList)==null?void 0:n[0]),1),u("div",null,L((r=e==null?void 0:e.extraTeamList)==null?void 0:r[1]),1)])])}}}),xe={key:1,class:"p-1"},R=N({__name:"highlight",props:{content:null,index:null},setup(p){const e=p,f=["hsl(0, 100%, 50%)","hsl(10, 80%, 10%)","hsl(20, 50%, 50%)","rgb(20,200,20)","rgb(40,40,250)","rgb(200,10,160)","hsl(60,70%, 40%)","hsl(100,80%, 20%)","hsl(190, 90%, 50%)","hsl(270, 100%, 40%)","hsl(160, 40%, 50%)","hsl(120, 20%, 30%)"],c=T(()=>{if(Array.isArray(e.index)){const o=e.index;return"linear-gradient(to right,"+e.index.map((t,n)=>`${f[t]} ${n*100/o.length}% ${(n+1)*100/o.length}%`).join(",")+")"}return f[e.index]||""});return(o,t)=>(d(),_("div",null,[l(c)?(d(),_("div",{key:0,style:ee({background:l(c)}),class:"text-white p-1"},L(e.content),5)):(d(),_("div",xe,L(e.content),1))]))}});var W=(p=>(p.noSale="100",p))(W||{});const _e={class:"flex"},fe={class:"flex"},Le={key:1},pe={class:"flex"},he={key:1},ge=N({__name:"tiCai",props:{itemList:null,revList:null,scoreRevList:null},setup(p){const e=p,f=T(()=>e.itemList.filter(t=>t.oddsTitle==="让球").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===W.noSale?"未开售":t[0]}))),c=T(()=>e.itemList.filter(t=>t.oddsTitle==="总分").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===W.noSale?"未开售":t[0]}))),o=[{title:"让球",dataIndex:"scoreTitle",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:t,index:n}){var m,a,x,h;return((a=(m=e.revList)==null?void 0:m[0])==null?void 0:a.tiCaiType)==="win"&&t.scoreTitle===((h=(x=e.revList)==null?void 0:x[0])==null?void 0:h.tiCaiScore)&&t.win===parseFloat(e.revList[0].a)?y(R,{index:0,content:t.win.toFixed(2)}):t.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:t,index:n}){var m,a,x,h;return((a=(m=e.revList)==null?void 0:m[0])==null?void 0:a.tiCaiType)==="lose"&&t.scoreTitle===((h=(x=e.revList)==null?void 0:x[0])==null?void 0:h.tiCaiScore)&&t.lose===parseFloat(e.revList[0].a)?y(R,{index:0,content:t.lose.toFixed(2)}):t.lose.toFixed(2)}}];return(t,n)=>(d(),_("div",null,[g(l(B),{dataSource:l(f),columns:o,pagination:!1},null,8,["dataSource"]),u("div",_e,[(d(!0),_(P,null,Q(l(c),r=>{var m,a,x,h,C,b,F,I,D,M,j,i;return d(),_("div",null,[u("div",null,"总分："+L(r.scoreTitle),1),u("div",fe,[S(" 大   ： "),((a=(m=e.scoreRevList)==null?void 0:m[0])==null?void 0:a.tiCaiType)==="win"&&((h=(x=e.scoreRevList)==null?void 0:x[0])==null?void 0:h.tiCaiScore)===r.scoreTitle&&parseFloat((b=(C=e.scoreRevList)==null?void 0:C[0])==null?void 0:b.a)===r.win?(d(),z(R,{key:0,index:4,content:r.win.toFixed(2)},null,8,["content"])):(d(),_("span",Le,L(r.win.toFixed(2)),1))]),u("div",pe,[S(" 小   ： "),((I=(F=e.scoreRevList)==null?void 0:F[0])==null?void 0:I.tiCaiType)==="lose"&&((M=(D=e.scoreRevList)==null?void 0:D[0])==null?void 0:M.tiCaiScore)===r.scoreTitle&&parseFloat((i=(j=e.scoreRevList)==null?void 0:j[0])==null?void 0:i.a)===r.lose?(d(),z(R,{key:0,index:4,content:r.lose.toFixed(2)},null,8,["content"])):(d(),_("span",he,L(r.lose.toFixed(2)),1))])])}),256))])]))}}),Te=N({__name:"ball",props:{itemList:null,revList:null},setup(p){const e=p,f=T(()=>e.itemList.filter(o=>o.oddsTitle==="让球").map(o=>{const t=o.oddsItemList;return{scoreText:t[0][0],win:parseFloat(t[0][1]),lose:parseFloat(t[0][2])}})),c=[{title:"让球",dataIndex:"scoreText",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:o,index:t}){var r,m,a,x;return((m=(r=e.revList)==null?void 0:r[0])==null?void 0:m.extraType)==="win"&&o.scoreText===((x=(a=e.revList)==null?void 0:a[0])==null?void 0:x.extraScore)&&o.win===parseFloat(e.revList[0].b)?y(R,{index:0,content:o.win.toFixed(2)}):o.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:o,index:t}){var r,m,a,x;return((m=(r=e.revList)==null?void 0:r[0])==null?void 0:m.extraType)==="lose"&&o.scoreText===((x=(a=e.revList)==null?void 0:a[0])==null?void 0:x.extraScore)&&o.lose===parseFloat(e.revList[0].b)?y(R,{index:0,content:o.lose.toFixed(2)}):o.lose.toFixed(2)}}];return(o,t)=>(d(),_("div",null,[g(l(B),{dataSource:l(f),columns:c,pagination:!1},null,8,["dataSource"])]))}}),ye={class:"flex"},Re={class:"mr-1.5rem"},Fe={class:"flex"},we={key:1},ke={class:"flex"},$e={key:1},Se=N({__name:"extra",props:{teamList:null,itemList:null,revList:null,scoreRevList:null},setup(p){const e=p,f=T(()=>e.itemList.filter(c=>c.oddsTitle==="总分").map(c=>c.oddsItemList.map(o=>({title:o[0],win:parseFloat(o[1]),lose:parseFloat(o[2])}))).flat());return(c,o)=>(d(),_("div",null,[g(Te,{itemList:e.itemList,revList:e.revList},null,8,["itemList","revList"]),u("div",ye,[(d(!0),_(P,null,Q(l(f),t=>{var n,r,m,a,x,h,C,b,F,I,D,M;return d(),_("div",Re,[u("div",null,"总分："+L(t.title),1),u("div",Fe,[S(" 大   ： "),((r=(n=e.scoreRevList)==null?void 0:n[0])==null?void 0:r.extraType)==="win"&&((a=(m=e.scoreRevList)==null?void 0:m[0])==null?void 0:a.extraScore)===t.title&&parseFloat((h=(x=e.scoreRevList)==null?void 0:x[0])==null?void 0:h.b)===t.win?(d(),z(R,{key:0,index:4,content:t.win.toFixed(2)},null,8,["content"])):(d(),_("span",we,L(t.win.toFixed(2)),1))]),u("div",ke,[S(" 小   ： "),((b=(C=e.scoreRevList)==null?void 0:C[0])==null?void 0:b.extraType)==="lose"&&((I=(F=e.scoreRevList)==null?void 0:F[0])==null?void 0:I.extraScore)===t.title&&parseFloat((M=(D=e.scoreRevList)==null?void 0:D[0])==null?void 0:M.b)===t.lose?(d(),z(R,{key:0,index:4,content:t.lose.toFixed(2)},null,8,["content"])):(d(),_("span",$e,L(t.lose.toFixed(2)),1))])])}),256))])]))}}),Ce={key:0},be=u("div",null,"让球",-1),Ie={key:1},De=u("div",null,"总分",-1),Me=N({__name:"rev",props:{revList:null,scoreRevList:null},setup(p){const e=p,f=T(()=>e.revList),c=T(()=>e.scoreRevList),o=[{title:"GC",dataIndex:"GC",customRender({record:n}){return n.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:n}){return n.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:n}){return n.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:n,index:r}){return y(R,{index:r,content:n.rev.toFixed(2)})}}],t=[{title:"GC",dataIndex:"GC",customRender({record:n}){return n.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:n}){return n.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:n}){return n.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:n,index:r}){return y(R,{index:r+4,content:n.rev.toFixed(2)})}}];return(n,r)=>{var m,a;return d(),_("div",null,[(m=l(f))!=null&&m.length?(d(),_("div",Ce,[be,g(l(B),{columns:o,dataSource:l(f),pagination:!1},null,8,["dataSource"])])):J("",!0),(a=l(c))!=null&&a.length?(d(),_("div",Ie,[De,g(l(B),{columns:t,dataSource:l(c),pagination:!1},null,8,["dataSource"])])):J("",!0)])}}}),He=u("div",{class:"bg-white"}," ",-1),Ne=u("div",{class:"bg-gray-100"}," ",-1),Ve={class:"mx-4"},Oe={class:"flex flex-col"},Ee=N({__name:"index",setup(p){const e=ie(),f=ne(),c=A([]),o=T(()=>a.value===0?c.value.sort((i,v)=>H(i.dateTime,"MM-DD HH:ss").valueOf()-H(v.dateTime,"MM-DD HH:ss").valueOf()):a.value===1?c.value.sort((i,v)=>{var s,w,k,$;return(((w=(s=v.revList)==null?void 0:s[0])==null?void 0:w.rev)||0)-((($=(k=i.revList)==null?void 0:k[0])==null?void 0:$.rev)||0)}):a.value===2?c.value.sort((i,v)=>{var s,w,k,$;return(((w=(s=v.scoreRevList)==null?void 0:s[0])==null?void 0:w.rev)||0)-((($=(k=i.scoreRevList)==null?void 0:k[0])==null?void 0:$.rev)||0)}):c.value.sort((i,v)=>H(i.dateTime,"MM-DD HH:ss").valueOf()-H(v.dateTime,"MM-DD HH:ss").valueOf()));let t;const n=A(),r=T(()=>{var i;return((i=n.value)==null?void 0:i.message1List)||[]}),m=T(()=>{var i;return((i=n.value)==null?void 0:i.message2List)||[]}),a=A(1),x=T(()=>a.value===0?"用rev排序":a.value===1?"用总分排序":a.value===2?"用时间排序":""),h=A(!1),C={pageSize:300};async function b(){var w,k,$,q,E,U;if(f.path!=="/basketball")return!1;const i=location.origin,s=await(await fetch(`${i}/basketballData/?p=${O.password}&token=${O.token}`)).json();if(s.code!==200){if(G.error((s==null?void 0:s.msg)||"更新出错",20),(s==null?void 0:s.code)===619)return G.info("已停止数据自动更新",10),!1;if((s==null?void 0:s.code)===500&&(w=s==null?void 0:s.data)!=null&&w.token&&(localStorage.setItem("token",(k=s==null?void 0:s.data)==null?void 0:k.token),O.token=($=s==null?void 0:s.data)==null?void 0:$.token),(s==null?void 0:s.code)===601)return G.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(s.code===401)return O.password="",localStorage.setItem("ps",""),O.token="",localStorage.setItem("token",""),console.log("goto login"),e.push({path:"/login"}),!1}return(q=s.data)!=null&&q.matchData&&(G.success(`数据更新 ${(E=s==null?void 0:s.data)!=null&&E.timestamp?"距离当前"+(H().valueOf()-H(s.data.timestamp).valueOf())/1e3+"秒":""}, 在线人数${((U=s==null?void 0:s.data)==null?void 0:U.liveCount)||0}`,5),c.value=s.data.matchData,n.value=s.data,localStorage.setItem("token",s.data.token),O.token=s.data.token),!0}async function F(i,v){try{if(!await i())return}catch{}t=setTimeout(async()=>{try{await F(i,v)}catch{}},v)}te(async()=>{F(async()=>document.hidden?!0:await b(),10*1e3)}),se(()=>{t&&clearTimeout(t)});const I=()=>{if(a.value===0){a.value=1;return}if(a.value===1){a.value=2;return}if(a.value===2){a.value=0;return}return 0},D=()=>{e.push({path:"/setting"})},M=(i,v)=>["bg-white","bg-gray-100"][v%2],j=[{title:"赛事",customRender({record:i}){return y(ve,{dateTime:i.dateTime,tiCaiTeamList:i.tiCaiTeamList,extraTeamList:i.extraTeamList,leagueName:i.league,num:i.num})}},{title:"体彩",customRender({record:i}){return y(ge,{teamList:i.tiCaiTeamList,itemList:i.tiCaiItemList,revList:i.revList,scoreRevList:i.scoreRevList})}},{title:"外部",customRender({record:i}){return y(Se,{teamList:i.extraTeamList,itemList:i.extraItemList.filter(v=>["让球","总分","独赢"].includes(v.oddsTitle)),revList:i.revList,scoreRevList:i.scoreRevList})}},{title:"Rev",customRender({record:i}){return y(Me,{revList:i.revList,scoreRevList:i.scoreRevList})}}];return(i,v)=>(d(),_("div",null,[He,Ne,u("div",Ve,[g(l(B),{dataSource:l(o),columns:j,bordered:"",rowClassName:M,pagination:C},null,8,["dataSource"])]),g(l(ae),{width:"840",placement:"right",closable:!0,visible:h.value,mask:!0,onClose:v[0]||(v[0]=()=>h.value=!1)},{default:V(()=>[g(K,{"message-list":l(r)},null,8,["message-list"]),g(l(X)),g(K,{"message-list":l(m)},null,8,["message-list"])]),_:1},8,["visible"]),g(l(Z),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:V(()=>[u("div",Oe,[g(l(Y),{type:"primary",onClick:v[1]||(v[1]=()=>h.value=!0),class:"my-2"},{default:V(()=>[S(" 消息")]),_:1}),g(l(Y),{type:"primary",onClick:I,class:"my-2"},{default:V(()=>[S(L(l(x)),1)]),_:1}),g(l(Y),{class:"my-2",onClick:D},{default:V(()=>[S(" 设置")]),_:1}),g(l(Y),{class:"my-2",onClick:v[2]||(v[2]=s=>l(e).push("/"))},{default:V(()=>[S(" 足球")]),_:1})])]),_:1})]))}});export{Ee as default};
