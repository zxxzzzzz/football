import{d as M,A as Q}from"./index-f7eb7401.js";import{d as D,k as F,o as d,c as _,a as c,J as L,u,K as U,b as g,L as J,M as K,N as y,e as S,W as j,O as E,r as A,h as q,j as P,w as N,f as X,Q as Z,s as H,R as V}from"./index-67d36e82.js";import{T as O}from"./index-bf81a5cb.js";import{B}from"./button-d63e6193.js";import"./SearchOutlined-5762de53.js";import"./index-77df5765.js";import"./Input-ee9033ec.js";const ee={class:"mb-2"},te={class:"mb-2"},se={class:"mb-2"},ne={class:"flex mb-2"},ie={class:"mr-2"},oe={class:"flex mb-2 text-green-500"},ae={class:"mr-2"},re=D({__name:"match",props:{dateTime:null,leagueName:null,tiCaiTeamList:null,num:null,extraTeamList:null},setup(h){const e=h;return F(()=>{if(!e.dateTime)return"";try{const f=["周日","周一","周二","周三","周四","周五","周六"],l=M(e.dateTime,"YYYY-MM-DD HH:mm").day();return f[l]}catch(f){return f.message}}),(f,l)=>{var o,t,n,a;return d(),_("div",null,[c("div",ee,L(e==null?void 0:e.num),1),c("div",te,L(e==null?void 0:e.dateTime),1),c("div",se,L(e==null?void 0:e.leagueName),1),c("div",ne,[c("div",ie,L((o=e==null?void 0:e.tiCaiTeamList)==null?void 0:o[0]),1),c("div",null,L((t=e==null?void 0:e.tiCaiTeamList)==null?void 0:t[1]),1)]),c("div",oe,[c("div",ae,L((n=e==null?void 0:e.extraTeamList)==null?void 0:n[0]),1),c("div",null,L((a=e==null?void 0:e.extraTeamList)==null?void 0:a[1]),1)])])}}}),le={key:1,class:"p-1"},R=D({__name:"highlight",props:{content:null,index:null},setup(h){const e=h,f=["hsl(0, 100%, 50%)","hsl(10, 80%, 10%)","hsl(20, 50%, 50%)","rgb(20,200,20)","rgb(40,40,250)","rgb(200,10,160)","hsl(60,70%, 40%)","hsl(100,80%, 20%)","hsl(190, 90%, 50%)","hsl(270, 100%, 40%)","hsl(160, 40%, 50%)","hsl(120, 20%, 30%)"],l=F(()=>{if(Array.isArray(e.index)){const o=e.index;return"linear-gradient(to right,"+e.index.map((t,n)=>`${f[t]} ${n*100/o.length}% ${(n+1)*100/o.length}%`).join(",")+")"}return f[e.index]||""});return(o,t)=>(d(),_("div",null,[u(l)?(d(),_("div",{key:0,style:U({background:u(l)}),class:"text-white p-1"},L(e.content),5)):(d(),_("div",le,L(e.content),1))]))}});var G=(h=>(h.noSale="100",h))(G||{});const ce={class:"flex"},ue={class:"flex"},de={key:1},me={class:"flex"},ve={key:1},xe=D({__name:"tiCai",props:{itemList:null,revList:null,scoreRevList:null},setup(h){const e=h,f=F(()=>e.itemList.filter(t=>t.oddsTitle==="让球").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===G.noSale?"未开售":t[0]}))),l=F(()=>e.itemList.filter(t=>t.oddsTitle==="总分").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===G.noSale?"未开售":t[0]}))),o=[{title:"让球",dataIndex:"scoreTitle",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:t,index:n}){var m,v,x,p;return((v=(m=e.revList)==null?void 0:m[0])==null?void 0:v.tiCaiType)==="win"&&t.scoreTitle===((p=(x=e.revList)==null?void 0:x[0])==null?void 0:p.tiCaiScore)&&t.win===parseFloat(e.revList[0].a)?y(R,{index:0,content:t.win.toFixed(2)}):t.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:t,index:n}){var m,v,x,p;return((v=(m=e.revList)==null?void 0:m[0])==null?void 0:v.tiCaiType)==="lose"&&t.scoreTitle===((p=(x=e.revList)==null?void 0:x[0])==null?void 0:p.tiCaiScore)&&t.lose===parseFloat(e.revList[0].a)?y(R,{index:0,content:t.lose.toFixed(2)}):t.lose.toFixed(2)}}];return(t,n)=>(d(),_("div",null,[g(u(O),{dataSource:u(f),columns:o,pagination:!1},null,8,["dataSource"]),c("div",ce,[(d(!0),_(J,null,K(u(l),a=>{var m,v,x,p,$,C,I,b,i,r,s,T;return d(),_("div",null,[c("div",null,"总分："+L(a.scoreTitle),1),c("div",ue,[S(" 大   ： "),((v=(m=e.scoreRevList)==null?void 0:m[0])==null?void 0:v.tiCaiType)==="win"&&((p=(x=e.scoreRevList)==null?void 0:x[0])==null?void 0:p.tiCaiScore)===a.scoreTitle&&parseFloat((C=($=e.scoreRevList)==null?void 0:$[0])==null?void 0:C.a)===a.win?(d(),j(R,{key:0,index:4,content:a.win.toFixed(2)},null,8,["content"])):(d(),_("span",de,L(a.win.toFixed(2)),1))]),c("div",me,[S(" 小   ： "),((b=(I=e.scoreRevList)==null?void 0:I[0])==null?void 0:b.tiCaiType)==="lose"&&((r=(i=e.scoreRevList)==null?void 0:i[0])==null?void 0:r.tiCaiScore)===a.scoreTitle&&parseFloat((T=(s=e.scoreRevList)==null?void 0:s[0])==null?void 0:T.a)===a.lose?(d(),j(R,{key:0,index:4,content:a.lose.toFixed(2)},null,8,["content"])):(d(),_("span",ve,L(a.lose.toFixed(2)),1))])])}),256))])]))}}),_e=D({__name:"ball",props:{itemList:null,revList:null},setup(h){const e=h,f=F(()=>e.itemList.filter(o=>o.oddsTitle==="让球").map(o=>{const t=o.oddsItemList;return{scoreText:t[0][0],win:parseFloat(t[0][1]),lose:parseFloat(t[0][2])}})),l=[{title:"让球",dataIndex:"scoreText",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:o,index:t}){var a,m,v,x;return((m=(a=e.revList)==null?void 0:a[0])==null?void 0:m.extraType)==="win"&&o.scoreText===((x=(v=e.revList)==null?void 0:v[0])==null?void 0:x.extraScore)&&o.win===parseFloat(e.revList[0].b)?y(R,{index:0,content:o.win.toFixed(2)}):o.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:o,index:t}){var a,m,v,x;return((m=(a=e.revList)==null?void 0:a[0])==null?void 0:m.extraType)==="lose"&&o.scoreText===((x=(v=e.revList)==null?void 0:v[0])==null?void 0:x.extraScore)&&o.lose===parseFloat(e.revList[0].b)?y(R,{index:0,content:o.lose.toFixed(2)}):o.lose.toFixed(2)}}];return(o,t)=>(d(),_("div",null,[g(u(O),{dataSource:u(f),columns:l,pagination:!1},null,8,["dataSource"])]))}}),fe={class:"flex"},Le={class:"mr-1.5rem"},he={class:"flex"},pe={key:1},Te={class:"flex"},ge={key:1},ye=D({__name:"extra",props:{teamList:null,itemList:null,revList:null,scoreRevList:null},setup(h){const e=h,f=F(()=>e.itemList.filter(l=>l.oddsTitle==="总分").map(l=>l.oddsItemList.map(o=>({title:o[0],win:parseFloat(o[1]),lose:parseFloat(o[2])}))).flat());return(l,o)=>(d(),_("div",null,[g(_e,{itemList:e.itemList,revList:e.revList},null,8,["itemList","revList"]),c("div",fe,[(d(!0),_(J,null,K(u(f),t=>{var n,a,m,v,x,p,$,C,I,b,i,r;return d(),_("div",Le,[c("div",null,"总分："+L(t.title),1),c("div",he,[S(" 大   ： "),((a=(n=e.scoreRevList)==null?void 0:n[0])==null?void 0:a.extraType)==="win"&&((v=(m=e.scoreRevList)==null?void 0:m[0])==null?void 0:v.extraScore)===t.title&&parseFloat((p=(x=e.scoreRevList)==null?void 0:x[0])==null?void 0:p.b)===t.win?(d(),j(R,{key:0,index:4,content:t.win.toFixed(2)},null,8,["content"])):(d(),_("span",pe,L(t.win.toFixed(2)),1))]),c("div",Te,[S(" 小   ： "),((C=($=e.scoreRevList)==null?void 0:$[0])==null?void 0:C.extraType)==="lose"&&((b=(I=e.scoreRevList)==null?void 0:I[0])==null?void 0:b.extraScore)===t.title&&parseFloat((r=(i=e.scoreRevList)==null?void 0:i[0])==null?void 0:r.b)===t.lose?(d(),j(R,{key:0,index:4,content:t.lose.toFixed(2)},null,8,["content"])):(d(),_("span",ge,L(t.lose.toFixed(2)),1))])])}),256))])]))}}),Re={key:0},Fe=c("div",null,"让球",-1),ke={key:1},we=c("div",null,"总分",-1),Se=D({__name:"rev",props:{revList:null,scoreRevList:null},setup(h){const e=h,f=F(()=>e.revList),l=F(()=>e.scoreRevList),o=[{title:"GC",dataIndex:"GC",customRender({record:n}){return n.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:n}){return n.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:n}){return n.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:n,index:a}){return y(R,{index:a,content:n.rev.toFixed(2)})}}],t=[{title:"GC",dataIndex:"GC",customRender({record:n}){return n.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:n}){return n.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:n}){return n.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:n,index:a}){return y(R,{index:a+4,content:n.rev.toFixed(2)})}}];return(n,a)=>{var m,v;return d(),_("div",null,[(m=u(f))!=null&&m.length?(d(),_("div",Re,[Fe,g(u(O),{columns:o,dataSource:u(f),pagination:!1},null,8,["dataSource"])])):E("",!0),(v=u(l))!=null&&v.length?(d(),_("div",ke,[we,g(u(O),{columns:t,dataSource:u(l),pagination:!1},null,8,["dataSource"])])):E("",!0)])}}}),$e=c("div",{class:"bg-white"}," ",-1),Ce=c("div",{class:"bg-gray-100"}," ",-1),Ie={class:"mx-4"},be={class:"flex flex-col"},je=D({__name:"index",setup(h){const e=X(),f=Z(),l=A([]),o=F(()=>n.value===0?l.value.sort((i,r)=>M(i.dateTime,"MM-DD HH:ss").valueOf()-M(r.dateTime,"MM-DD HH:ss").valueOf()):n.value===1?l.value.sort((i,r)=>{var s,T,k,w;return(((T=(s=r.revList)==null?void 0:s[0])==null?void 0:T.rev)||0)-(((w=(k=i.revList)==null?void 0:k[0])==null?void 0:w.rev)||0)}):n.value===2?l.value.sort((i,r)=>{var s,T,k,w;return(((T=(s=r.scoreRevList)==null?void 0:s[0])==null?void 0:T.rev)||0)-(((w=(k=i.scoreRevList)==null?void 0:k[0])==null?void 0:w.rev)||0)}):l.value.sort((i,r)=>M(i.dateTime,"MM-DD HH:ss").valueOf()-M(r.dateTime,"MM-DD HH:ss").valueOf()));let t;const n=A(1),a=F(()=>n.value===0?"用rev排序":n.value===1?"用总分排序":n.value===2?"用时间排序":""),m=A(!1),v={pageSize:300};async function x(){var T,k,w,Y,W,z;if(f.path!=="/basketball")return!1;const i=location.origin,s=await(await fetch(`${i}/basketballData/?p=${H.password}&token=${H.token}`)).json();if(s.code!==200){if(V.error((s==null?void 0:s.msg)||"更新出错",20),(s==null?void 0:s.code)===619)return V.info("已停止数据自动更新",10),!1;if((s==null?void 0:s.code)===500&&(T=s==null?void 0:s.data)!=null&&T.token&&(localStorage.setItem("token",(k=s==null?void 0:s.data)==null?void 0:k.token),H.token=(w=s==null?void 0:s.data)==null?void 0:w.token),(s==null?void 0:s.code)===601)return V.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(s.code===401)return H.password="",localStorage.setItem("ps",""),H.token="",localStorage.setItem("token",""),console.log("goto login"),e.push({path:"/login"}),!1}return(Y=s.data)!=null&&Y.matchData&&(V.success(`数据更新 ${(W=s==null?void 0:s.data)!=null&&W.timestamp?"距离当前"+(M().valueOf()-M(s.data.timestamp).valueOf())/1e3+"秒":""}, 在线人数${((z=s==null?void 0:s.data)==null?void 0:z.liveCount)||0}`,5),l.value=s.data.matchData,localStorage.setItem("token",s.data.token),H.token=s.data.token),!0}async function p(i,r){try{if(!await i())return}catch{}t=setTimeout(async()=>{try{await p(i,r)}catch{}},r)}q(async()=>{p(async()=>document.hidden?!0:await x(),5*1e3)}),P(()=>{t&&clearTimeout(t)});const $=()=>{if(n.value===0){n.value=1;return}if(n.value===1){n.value=2;return}if(n.value===2){n.value=0;return}return 0},C=()=>{e.push({path:"/setting"})},I=(i,r)=>["bg-white","bg-gray-100"][r%2],b=[{title:"赛事",customRender({record:i}){return y(re,{dateTime:i.dateTime,tiCaiTeamList:i.tiCaiTeamList,extraTeamList:i.extraTeamList,leagueName:i.league,num:i.num})}},{title:"体彩",customRender({record:i}){return y(xe,{teamList:i.tiCaiTeamList,itemList:i.tiCaiItemList,revList:i.revList,scoreRevList:i.scoreRevList})}},{title:"外部",customRender({record:i}){return y(ye,{teamList:i.extraTeamList,itemList:i.extraItemList.filter(r=>["让球","总分","独赢"].includes(r.oddsTitle)),revList:i.revList,scoreRevList:i.scoreRevList})}},{title:"Rev",customRender({record:i}){return y(Se,{revList:i.revList,scoreRevList:i.scoreRevList})}}];return(i,r)=>(d(),_("div",null,[$e,Ce,c("div",Ie,[g(u(O),{dataSource:u(o),columns:b,bordered:"",rowClassName:I,pagination:v},null,8,["dataSource"])]),g(u(Q),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:N(()=>[c("div",be,[g(u(B),{type:"primary",onClick:r[0]||(r[0]=()=>m.value=!0),class:"my-2"},{default:N(()=>[S(" 消息")]),_:1}),g(u(B),{type:"primary",onClick:$,class:"my-2"},{default:N(()=>[S(L(u(a)),1)]),_:1}),g(u(B),{class:"my-2",onClick:C},{default:N(()=>[S(" 设置")]),_:1}),g(u(B),{class:"my-2",onClick:r[1]||(r[1]=s=>u(e).push("/"))},{default:N(()=>[S(" 足球")]),_:1})])]),_:1})]))}});export{je as default};
