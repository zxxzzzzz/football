import{d as C,r as f,l as N,a3 as T,c as a,b as r,w as l,u as n,o,a as i,F as m,ak as p,e as V,f as j,s as I,m as h,aj as _,ai as g}from"./index-19380361.js";import{o as x,q as D,A}from"./index-503949c4.js";import{B as F}from"./button-6eea38af.js";import"./SearchOutlined-e4562d3d.js";const $={class:"flex flex-wrap mb-2"},q={class:"mb-2"},E={class:"flex flex-wrap"},M={class:"flex flex-wrap"},R={class:"flex flex-wrap mb-2"},U={class:"flex flex-col"},P=C({__name:"index",setup(G){const v=j(),u=["#78a5de","#4fb2a1","#205a13","#186174","#88b00b","#cf4b22","#9e57cd","#238910","#c18fde","#673b84","#760bbb","#557766","#557733","#337755"],S=f([]),y=f([]),b=f([]),L=f([]);let w;async function k(){var t,s;const c=location.origin,e=await(await fetch(`${c}/data?p=${I.password}`)).json();if(e.code!==200){if(h.error((e==null?void 0:e.msg)||"更新出错",20),(e==null?void 0:e.code)===619)return h.info("已停止数据自动更新",10),!1;if((e==null?void 0:e.code)===601)return h.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(e.code===401)return I.password="",localStorage.setItem("ps",""),v.push({path:"/login"}),!1}return(s=(t=e.data)==null?void 0:t.matchData)!=null&&s.length&&(h.success("数据更新成功"),S.value=e.data.matchData,y.value=e.data.message1List,b.value=e.data.message2List,L.value=e.data.message3List),!0}async function B(c,d){try{if(!await c())return}catch{}w=setTimeout(async()=>{try{await B(c,d)}catch{}},d)}const z=()=>{v.push({path:"/setting"})};return N(async()=>{B(async()=>document.hidden?!0:await k(),5*1e3)}),T(()=>{w&&clearTimeout(w)}),(c,d)=>(o(),a("div",null,[r(n(x),{"item-layout":"horizontal","data-source":y.value},{renderItem:l(({item:e})=>[i("div",$,[(o(!0),a(m,null,p(e.split(" "),(t,s)=>(o(),a("div",{style:_({color:u[s],margin:"0 4px"}),class:"whitespace-nowrap"},g(t),5))),256))])]),_:1},8,["data-source"]),r(n(D)),r(n(x),{"item-layout":"horizontal","data-source":b.value},{renderItem:l(({item:e})=>[i("div",q,[i("div",E,[(o(!0),a(m,null,p(e[0].split(" "),(t,s)=>(o(),a("div",{style:_({color:u[s],margin:"0 4px"}),class:"whitespace-nowrap"},g(t),5))),256))]),i("div",M,[(o(!0),a(m,null,p(e[1].split(" "),(t,s)=>(o(),a("div",{style:_({color:u[s],margin:"0 4px"}),class:"whitespace-nowrap"},g(t),5))),256))])])]),_:1},8,["data-source"]),r(n(D)),r(n(x),{"item-layout":"horizontal","data-source":L.value},{renderItem:l(({item:e})=>[i("div",R,[(o(!0),a(m,null,p(e.split(" "),(t,s)=>(o(),a("div",{style:_({color:u[s],margin:"0 4px"}),class:"whitespace-nowrap"},g(t),5))),256))])]),_:1},8,["data-source"]),r(n(A),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:l(()=>[i("div",U,[r(n(F),{class:"my-2",onClick:z},{default:l(()=>[V(" 设置")]),_:1})])]),_:1})]))}});export{P as default};
