import{d as H,A as q}from"./index-fdbcb801.js";import{d as N,k as T,o as m,c as x,a as d,J as L,u as c,K as P,b as g,L as K,M as Q,N as y,e as S,T as Y,O as J,r as j,h as X,j as Z,w as O,U as ee,f as te,Q as se,s as V,R as A}from"./index-4fa17585.js";import{T as B}from"./index-16945a5f.js";import{_ as ne}from"./message.vue_vue_type_script_setup_true_lang-f62cdb13.js";import{B as G}from"./button-35bd9e6f.js";import"./SearchOutlined-0a350201.js";import"./index-d8ea07be.js";import"./Input-9e15b09f.js";const ie={class:"mb-2"},ae={class:"mb-2"},oe={class:"mb-2"},re={class:"flex mb-2"},le={class:"mr-2"},ce={class:"flex mb-2 text-green-500"},ue={class:"mr-2"},de=N({__name:"match",props:{dateTime:null,leagueName:null,tiCaiTeamList:null,num:null,extraTeamList:null},setup(p){const e=p;return T(()=>{if(!e.dateTime)return"";try{const f=["周日","周一","周二","周三","周四","周五","周六"],u=H(e.dateTime,"YYYY-MM-DD HH:mm").day();return f[u]}catch(f){return f.message}}),(f,u)=>{var o,t,i,r;return m(),x("div",null,[d("div",ie,L(e==null?void 0:e.num),1),d("div",ae,L(e==null?void 0:e.dateTime),1),d("div",oe,L(e==null?void 0:e.leagueName),1),d("div",re,[d("div",le,L((o=e==null?void 0:e.tiCaiTeamList)==null?void 0:o[0]),1),d("div",null,L((t=e==null?void 0:e.tiCaiTeamList)==null?void 0:t[1]),1)]),d("div",ce,[d("div",ue,L((i=e==null?void 0:e.extraTeamList)==null?void 0:i[0]),1),d("div",null,L((r=e==null?void 0:e.extraTeamList)==null?void 0:r[1]),1)])])}}}),me={key:1,class:"p-1"},R=N({__name:"highlight",props:{content:null,index:null},setup(p){const e=p,f=["hsl(0, 100%, 50%)","hsl(10, 80%, 10%)","hsl(20, 50%, 50%)","rgb(20,200,20)","rgb(40,40,250)","rgb(200,10,160)","hsl(60,70%, 40%)","hsl(100,80%, 20%)","hsl(190, 90%, 50%)","hsl(270, 100%, 40%)","hsl(160, 40%, 50%)","hsl(120, 20%, 30%)"],u=T(()=>{if(Array.isArray(e.index)){const o=e.index;return"linear-gradient(to right,"+e.index.map((t,i)=>`${f[t]} ${i*100/o.length}% ${(i+1)*100/o.length}%`).join(",")+")"}return f[e.index]||""});return(o,t)=>(m(),x("div",null,[c(u)?(m(),x("div",{key:0,style:P({background:c(u)}),class:"text-white p-1"},L(e.content),5)):(m(),x("div",me,L(e.content),1))]))}});var z=(p=>(p.noSale="100",p))(z||{});const ve={class:"flex"},_e={class:"flex"},xe={key:1},fe={class:"flex"},Le={key:1},pe=N({__name:"tiCai",props:{itemList:null,revList:null,scoreRevList:null},setup(p){const e=p,f=T(()=>e.itemList.filter(t=>t.oddsTitle==="让球").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===z.noSale?"未开售":t[0]}))),u=T(()=>e.itemList.filter(t=>t.oddsTitle==="总分").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===z.noSale?"未开售":t[0]}))),o=[{title:"让球",dataIndex:"scoreTitle",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:t,index:i}){var a,v,_,h;return((v=(a=e.revList)==null?void 0:a[0])==null?void 0:v.tiCaiType)==="win"&&t.scoreTitle===((h=(_=e.revList)==null?void 0:_[0])==null?void 0:h.tiCaiScore)&&t.win===parseFloat(e.revList[0].a)?y(R,{index:0,content:t.win.toFixed(2)}):t.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:t,index:i}){var a,v,_,h;return((v=(a=e.revList)==null?void 0:a[0])==null?void 0:v.tiCaiType)==="lose"&&t.scoreTitle===((h=(_=e.revList)==null?void 0:_[0])==null?void 0:h.tiCaiScore)&&t.lose===parseFloat(e.revList[0].a)?y(R,{index:0,content:t.lose.toFixed(2)}):t.lose.toFixed(2)}}];return(t,i)=>(m(),x("div",null,[g(c(B),{dataSource:c(f),columns:o,pagination:!1},null,8,["dataSource"]),d("div",ve,[(m(!0),x(K,null,Q(c(u),r=>{var a,v,_,h,C,w,b,I,M,D,n,l;return m(),x("div",null,[d("div",null,"总分："+L(r.scoreTitle),1),d("div",_e,[S(" 大   ： "),((v=(a=e.scoreRevList)==null?void 0:a[0])==null?void 0:v.tiCaiType)==="win"&&((h=(_=e.scoreRevList)==null?void 0:_[0])==null?void 0:h.tiCaiScore)===r.scoreTitle&&parseFloat((w=(C=e.scoreRevList)==null?void 0:C[0])==null?void 0:w.a)===r.win?(m(),Y(R,{key:0,index:4,content:r.win.toFixed(2)},null,8,["content"])):(m(),x("span",xe,L(r.win.toFixed(2)),1))]),d("div",fe,[S(" 小   ： "),((I=(b=e.scoreRevList)==null?void 0:b[0])==null?void 0:I.tiCaiType)==="lose"&&((D=(M=e.scoreRevList)==null?void 0:M[0])==null?void 0:D.tiCaiScore)===r.scoreTitle&&parseFloat((l=(n=e.scoreRevList)==null?void 0:n[0])==null?void 0:l.a)===r.lose?(m(),Y(R,{key:0,index:4,content:r.lose.toFixed(2)},null,8,["content"])):(m(),x("span",Le,L(r.lose.toFixed(2)),1))])])}),256))])]))}}),he=N({__name:"ball",props:{itemList:null,revList:null},setup(p){const e=p,f=T(()=>e.itemList.filter(o=>o.oddsTitle==="让球").map(o=>{const t=o.oddsItemList;return{scoreText:t[0][0],win:parseFloat(t[0][1]),lose:parseFloat(t[0][2])}})),u=[{title:"让球",dataIndex:"scoreText",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:o,index:t}){var r,a,v,_;return((a=(r=e.revList)==null?void 0:r[0])==null?void 0:a.extraType)==="win"&&o.scoreText===((_=(v=e.revList)==null?void 0:v[0])==null?void 0:_.extraScore)&&o.win===parseFloat(e.revList[0].b)?y(R,{index:0,content:o.win.toFixed(2)}):o.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:o,index:t}){var r,a,v,_;return((a=(r=e.revList)==null?void 0:r[0])==null?void 0:a.extraType)==="lose"&&o.scoreText===((_=(v=e.revList)==null?void 0:v[0])==null?void 0:_.extraScore)&&o.lose===parseFloat(e.revList[0].b)?y(R,{index:0,content:o.lose.toFixed(2)}):o.lose.toFixed(2)}}];return(o,t)=>(m(),x("div",null,[g(c(B),{dataSource:c(f),columns:u,pagination:!1},null,8,["dataSource"])]))}}),ge={class:"flex"},Te={class:"mr-1.5rem"},ye={class:"flex"},Re={key:1},Fe={class:"flex"},we={key:1},ke=N({__name:"extra",props:{teamList:null,itemList:null,revList:null,scoreRevList:null},setup(p){const e=p,f=T(()=>e.itemList.filter(u=>u.oddsTitle==="总分").map(u=>u.oddsItemList.map(o=>({title:o[0],win:parseFloat(o[1]),lose:parseFloat(o[2])}))).flat());return(u,o)=>(m(),x("div",null,[g(he,{itemList:e.itemList,revList:e.revList},null,8,["itemList","revList"]),d("div",ge,[(m(!0),x(K,null,Q(c(f),t=>{var i,r,a,v,_,h,C,w,b,I,M,D;return m(),x("div",Te,[d("div",null,"总分："+L(t.title),1),d("div",ye,[S(" 大   ： "),((r=(i=e.scoreRevList)==null?void 0:i[0])==null?void 0:r.extraType)==="win"&&((v=(a=e.scoreRevList)==null?void 0:a[0])==null?void 0:v.extraScore)===t.title&&parseFloat((h=(_=e.scoreRevList)==null?void 0:_[0])==null?void 0:h.b)===t.win?(m(),Y(R,{key:0,index:4,content:t.win.toFixed(2)},null,8,["content"])):(m(),x("span",Re,L(t.win.toFixed(2)),1))]),d("div",Fe,[S(" 小   ： "),((w=(C=e.scoreRevList)==null?void 0:C[0])==null?void 0:w.extraType)==="lose"&&((I=(b=e.scoreRevList)==null?void 0:b[0])==null?void 0:I.extraScore)===t.title&&parseFloat((D=(M=e.scoreRevList)==null?void 0:M[0])==null?void 0:D.b)===t.lose?(m(),Y(R,{key:0,index:4,content:t.lose.toFixed(2)},null,8,["content"])):(m(),x("span",we,L(t.lose.toFixed(2)),1))])])}),256))])]))}}),$e={key:0},Se=d("div",null,"让球",-1),Ce={key:1},be=d("div",null,"总分",-1),Ie=N({__name:"rev",props:{revList:null,scoreRevList:null},setup(p){const e=p,f=T(()=>e.revList),u=T(()=>e.scoreRevList),o=[{title:"GC",dataIndex:"GC",customRender({record:i}){return i.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:i}){return i.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:i}){return i.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:i,index:r}){return y(R,{index:r,content:i.rev.toFixed(2)})}}],t=[{title:"GC",dataIndex:"GC",customRender({record:i}){return i.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:i}){return i.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:i}){return i.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:i,index:r}){return y(R,{index:r+4,content:i.rev.toFixed(2)})}}];return(i,r)=>{var a,v;return m(),x("div",null,[(a=c(f))!=null&&a.length?(m(),x("div",$e,[Se,g(c(B),{columns:o,dataSource:c(f),pagination:!1},null,8,["dataSource"])])):J("",!0),(v=c(u))!=null&&v.length?(m(),x("div",Ce,[be,g(c(B),{columns:t,dataSource:c(u),pagination:!1},null,8,["dataSource"])])):J("",!0)])}}}),Me=d("div",{class:"bg-white"}," ",-1),De=d("div",{class:"bg-gray-100"}," ",-1),He={class:"mx-4"},Ne={class:"flex flex-col"},Ue=N({__name:"index",setup(p){const e=te(),f=se(),u=j([]),o=T(()=>a.value===0?u.value.sort((n,l)=>H(n.dateTime,"MM-DD HH:ss").valueOf()-H(l.dateTime,"MM-DD HH:ss").valueOf()):a.value===1?u.value.sort((n,l)=>{var s,F,k,$;return(((F=(s=l.revList)==null?void 0:s[0])==null?void 0:F.rev)||0)-((($=(k=n.revList)==null?void 0:k[0])==null?void 0:$.rev)||0)}):a.value===2?u.value.sort((n,l)=>{var s,F,k,$;return(((F=(s=l.scoreRevList)==null?void 0:s[0])==null?void 0:F.rev)||0)-((($=(k=n.scoreRevList)==null?void 0:k[0])==null?void 0:$.rev)||0)}):u.value.sort((n,l)=>H(n.dateTime,"MM-DD HH:ss").valueOf()-H(l.dateTime,"MM-DD HH:ss").valueOf()));let t;const i=j(),r=T(()=>{var n;return((n=i.value)==null?void 0:n.message1List)||[]}),a=j(1),v=T(()=>a.value===0?"用rev排序":a.value===1?"用总分排序":a.value===2?"用时间排序":""),_=j(!1),h={pageSize:300};async function C(){var F,k,$,U,W,E;if(f.path!=="/basketball")return!1;const n=location.origin,s=await(await fetch(`${n}/basketballData/?p=${V.password}&token=${V.token}`)).json();if(s.code!==200){if(A.error((s==null?void 0:s.msg)||"更新出错",20),(s==null?void 0:s.code)===619)return A.info("已停止数据自动更新",10),!1;if((s==null?void 0:s.code)===500&&(F=s==null?void 0:s.data)!=null&&F.token&&(localStorage.setItem("token",(k=s==null?void 0:s.data)==null?void 0:k.token),V.token=($=s==null?void 0:s.data)==null?void 0:$.token),(s==null?void 0:s.code)===601)return A.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(s.code===401)return V.password="",localStorage.setItem("ps",""),V.token="",localStorage.setItem("token",""),console.log("goto login"),e.push({path:"/login"}),!1}return(U=s.data)!=null&&U.matchData&&(A.success(`数据更新 ${(W=s==null?void 0:s.data)!=null&&W.timestamp?"距离当前"+(H().valueOf()-H(s.data.timestamp).valueOf())/1e3+"秒":""}, 在线人数${((E=s==null?void 0:s.data)==null?void 0:E.liveCount)||0}`,5),u.value=s.data.matchData,i.value=s.data,localStorage.setItem("token",s.data.token),V.token=s.data.token),!0}async function w(n,l){try{if(!await n())return}catch{}t=setTimeout(async()=>{try{await w(n,l)}catch{}},l)}X(async()=>{w(async()=>document.hidden?!0:await C(),5*1e3)}),Z(()=>{t&&clearTimeout(t)});const b=()=>{if(a.value===0){a.value=1;return}if(a.value===1){a.value=2;return}if(a.value===2){a.value=0;return}return 0},I=()=>{e.push({path:"/setting"})},M=(n,l)=>["bg-white","bg-gray-100"][l%2],D=[{title:"赛事",customRender({record:n}){return y(de,{dateTime:n.dateTime,tiCaiTeamList:n.tiCaiTeamList,extraTeamList:n.extraTeamList,leagueName:n.league,num:n.num})}},{title:"体彩",customRender({record:n}){return y(pe,{teamList:n.tiCaiTeamList,itemList:n.tiCaiItemList,revList:n.revList,scoreRevList:n.scoreRevList})}},{title:"外部",customRender({record:n}){return y(ke,{teamList:n.extraTeamList,itemList:n.extraItemList.filter(l=>["让球","总分","独赢"].includes(l.oddsTitle)),revList:n.revList,scoreRevList:n.scoreRevList})}},{title:"Rev",customRender({record:n}){return y(Ie,{revList:n.revList,scoreRevList:n.scoreRevList})}}];return(n,l)=>{const s=ee("Drawer");return m(),x("div",null,[Me,De,d("div",He,[g(c(B),{dataSource:c(o),columns:D,bordered:"",rowClassName:M,pagination:h},null,8,["dataSource"])]),g(s,{width:"840",placement:"right",closable:!0,visible:_.value,mask:!0,onClose:l[0]||(l[0]=()=>_.value=!1)},{default:O(()=>[g(ne,{"message1-list":c(r)},null,8,["message1-list"])]),_:1},8,["visible"]),g(c(q),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:O(()=>[d("div",Ne,[g(c(G),{type:"primary",onClick:l[1]||(l[1]=()=>_.value=!0),class:"my-2"},{default:O(()=>[S(" 消息")]),_:1}),g(c(G),{type:"primary",onClick:b,class:"my-2"},{default:O(()=>[S(L(c(v)),1)]),_:1}),g(c(G),{class:"my-2",onClick:I},{default:O(()=>[S(" 设置")]),_:1}),g(c(G),{class:"my-2",onClick:l[2]||(l[2]=F=>c(e).push("/"))},{default:O(()=>[S(" 足球")]),_:1})])]),_:1})])}}});export{Ue as default};
