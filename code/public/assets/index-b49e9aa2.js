import{d as T,A as E}from"./index-22b7d3cb.js";import{d as x,k as p,o as f,c as v,a as n,J as m,b as _,u as l,L as B,M as H,O as J,r as w,h as Q,j as U,w as g,N as I,e as R,f as q,Q as K,s as h,R as y}from"./index-5d5b375d.js";import{T as k}from"./index-fed324b7.js";import{B as S}from"./button-4286b3e8.js";import"./SearchOutlined-68324309.js";import"./index-87f21de6.js";import"./Input-b70ea7a1.js";const P={class:"mb-2"},X={class:"mb-2"},Z={class:"mb-2"},tt={class:"flex mb-2"},et={class:"mr-2"},st={class:"flex mb-2 text-green-500"},at={class:"mr-2"},it=x({__name:"match",props:{dateTime:null,leagueName:null,tiCaiTeamList:null,num:null,extraTeamList:null},setup(d){const e=d;return p(()=>{if(!e.dateTime)return"";try{const u=["周日","周一","周二","周三","周四","周五","周六"],o=T(e.dateTime,"YYYY-MM-DD HH:mm").day();return u[o]}catch(u){return u.message}}),(u,o)=>{var i,s,r,L;return f(),v("div",null,[n("div",P,m(e==null?void 0:e.num),1),n("div",X,m(e==null?void 0:e.dateTime),1),n("div",Z,m(e==null?void 0:e.leagueName),1),n("div",tt,[n("div",et,m((i=e==null?void 0:e.tiCaiTeamList)==null?void 0:i[0]),1),n("div",null,m((s=e==null?void 0:e.tiCaiTeamList)==null?void 0:s[1]),1)]),n("div",st,[n("div",at,m((r=e==null?void 0:e.extraTeamList)==null?void 0:r[0]),1),n("div",null,m((L=e==null?void 0:e.extraTeamList)==null?void 0:L[1]),1)])])}}});var $=(d=>(d.noSale="100",d))($||{});const nt={class:"flex"},lt=x({__name:"tiCai",props:{itemList:null,revList:null,scoreRevList:null,halfRevList:null},setup(d){const e=d,u=p(()=>e.itemList.filter(s=>s.oddsTitle==="让球").map(s=>s.oddsItemList).flat().map(s=>({win:parseFloat(s[1]),lose:parseFloat(s[2]),scoreTitle:s[0]===$.noSale?"未开售":s[0]}))),o=p(()=>e.itemList.filter(s=>s.oddsTitle==="总分").map(s=>s.oddsItemList).flat().map(s=>({win:parseFloat(s[1]),lose:parseFloat(s[2]),scoreTitle:s[0]===$.noSale?"未开售":s[0]}))),i=[{title:"让球",dataIndex:"scoreTitle",minWidth:48},{title:"胜",dataIndex:"win"},{title:"负",dataIndex:"lose"}];return(s,r)=>(f(),v("div",null,[_(l(k),{dataSource:l(u),columns:i,pagination:!1},null,8,["dataSource"]),n("div",nt,[(f(!0),v(B,null,H(l(o),L=>(f(),v("div",null,[n("div",null,"总分："+m(L.scoreTitle),1),n("div",null,"胜   ："+m(L.win),1),n("div",null,"负   ："+m(L.lose),1)]))),256))])]))}}),ot=x({__name:"ball",props:{itemList:null},setup(d){const e=d,u=p(()=>e.itemList.filter(i=>i.oddsTitle==="让球").map(i=>{const s=i.oddsItemList;return{scoreText:s[0][0],win:parseFloat(s[0][1]).toFixed(2),lose:parseFloat(s[0][2]).toFixed(2)}})),o=[{title:"让球",dataIndex:"scoreText",minWidth:48},{title:"胜",dataIndex:"win"},{title:"负",dataIndex:"lose"}];return(i,s)=>(f(),v("div",null,[_(l(k),{dataSource:l(u),columns:o,pagination:!1},null,8,["dataSource"])]))}}),rt={class:"flex"},ut={class:"mr-1.5rem"},ct=x({__name:"extra",props:{teamList:null,itemList:null,revList:null,scoreRevList:null,halfRevList:null},setup(d){const e=d,u=p(()=>e.itemList.filter(o=>o.oddsTitle==="总分").map(o=>o.oddsItemList.map(i=>({title:i[0],win:parseFloat(i[1]).toFixed(2),lose:parseFloat(i[2]).toFixed(2)}))).flat());return(o,i)=>(f(),v("div",null,[_(ot,{itemList:e.itemList},null,8,["itemList"]),n("div",rt,[(f(!0),v(B,null,H(l(u),s=>(f(),v("div",ut,[n("div",null,"总分："+m(s.title),1),n("div",null,"胜   ："+m(s.win),1),n("div",null,"负   ："+m(s.lose),1)]))),256))])]))}}),mt={key:0},dt=n("div",null,"让球",-1),ft=x({__name:"rev",props:{revList:null},setup(d){const e=d,u=p(()=>e.revList),o=[{title:"GC",dataIndex:"GC",customRender({record:i}){return i.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:i}){return i.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:i}){return i.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:i}){return i.rev.toFixed(2)}}];return(i,s)=>{var r;return f(),v("div",null,[(r=l(u))!=null&&r.length?(f(),v("div",mt,[dt,_(l(k),{columns:o,dataSource:l(u),pagination:!1},null,8,["dataSource"])])):J("",!0)])}}}),vt=n("div",{class:"bg-white"}," ",-1),_t=n("div",{class:"bg-gray-100"}," ",-1),Lt={class:"mx-4"},pt={class:"flex flex-col"},St=x({__name:"index",setup(d){const e=q(),u=K(),o=w([]),i=p(()=>o.value.sort((a,c)=>T(a.dateTime,"MM-DD HH:ss").valueOf()-T(c.dateTime,"MM-DD HH:ss").valueOf()));let s;const r=w(1),L=p(()=>r.value===0?"用rev排序":r.value===1?"用得分排序":r.value===2?"用时间排序":""),O=w(!1),Y={pageSize:300};async function j(){var b,F,D,N,M,V;if(u.path!=="/basketball")return!1;const a=location.origin,t=await(await fetch(`${a}/basketballData/?p=${h.password}&token=${h.token}`)).json();if(t.code!==200){if(y.error((t==null?void 0:t.msg)||"更新出错",20),(t==null?void 0:t.code)===619)return y.info("已停止数据自动更新",10),!1;if((t==null?void 0:t.code)===500&&(b=t==null?void 0:t.data)!=null&&b.token&&(localStorage.setItem("token",(F=t==null?void 0:t.data)==null?void 0:F.token),h.token=(D=t==null?void 0:t.data)==null?void 0:D.token),(t==null?void 0:t.code)===601)return y.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(t.code===401)return h.password="",localStorage.setItem("ps",""),h.token="",localStorage.setItem("token",""),console.log("goto login"),e.push({path:"/login"}),!1}return(N=t.data)!=null&&N.matchData&&(y.success(`数据更新 ${(M=t==null?void 0:t.data)!=null&&M.timestamp?"距离当前"+(T().valueOf()-T(t.data.timestamp).valueOf())/1e3+"秒":""}, 在线人数${((V=t==null?void 0:t.data)==null?void 0:V.liveCount)||0}`,5),o.value=t.data.matchData,localStorage.setItem("token",t.data.token),h.token=t.data.token),!0}async function C(a,c){try{if(!await a())return}catch{}s=setTimeout(async()=>{try{await C(a,c)}catch{}},c)}Q(async()=>{C(async()=>document.hidden?!0:await j(),5*1e3)}),U(()=>{s&&clearTimeout(s)});const A=()=>{if(r.value===0){r.value=1;return}if(r.value===1){r.value=2;return}if(r.value===2){r.value=0;return}return 0},G=()=>{e.push({path:"/setting"})},W=(a,c)=>["bg-white","bg-gray-100"][c%2],z=[{title:"赛事",customRender({record:a}){return I(it,{dateTime:a.dateTime,tiCaiTeamList:a.tiCaiTeamList,extraTeamList:a.extraTeamList,leagueName:a.league,num:a.num})}},{title:"体彩",customRender({record:a}){return I(lt,{teamList:a.tiCaiTeamList,itemList:a.tiCaiItemList,revList:a.revList,scoreRevList:a.scoreRevList,halfRevList:a.halfRevList})}},{title:"外部",customRender({record:a}){return I(ct,{teamList:a.extraTeamList,itemList:a.extraItemList.filter(c=>["让球","总分","独赢"].includes(c.oddsTitle)),revList:a.revList,halfRevList:a.halfRevList,scoreRevList:a.scoreRevList})}},{title:"Rev",customRender({record:a}){return I(ft,{revList:a.revList})}}];return(a,c)=>(f(),v("div",null,[vt,_t,n("div",Lt,[_(l(k),{dataSource:l(i),columns:z,bordered:"",rowClassName:W,pagination:Y},null,8,["dataSource"])]),_(l(E),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:g(()=>[n("div",pt,[_(l(S),{type:"primary",onClick:c[0]||(c[0]=()=>O.value=!0),class:"my-2"},{default:g(()=>[R(" 消息")]),_:1}),_(l(S),{type:"primary",onClick:A,class:"my-2"},{default:g(()=>[R(m(l(L)),1)]),_:1}),_(l(S),{class:"my-2",onClick:G},{default:g(()=>[R(" 设置")]),_:1}),_(l(S),{class:"my-2",onClick:c[1]||(c[1]=t=>l(e).push("/"))},{default:g(()=>[R(" 足球")]),_:1})])]),_:1})]))}});export{St as default};
