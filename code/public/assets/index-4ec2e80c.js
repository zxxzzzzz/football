import{d as H,L as Q,A as X}from"./index-68adac58.js";import{d as S,g as T,o as c,c as x,a as m,t as p,u as l,n as P,b as g,F as W,h as E,i as w,e as $,z as A,j as K,r as O,A as Z,w as N,k as ee,l as te,f as se,m as ie,s as B,p as z}from"./index-55927906.js";import{T as j,D as ne}from"./index-73bc09e3.js";import{B as G}from"./button-b464f006.js";import"./SearchOutlined-3054f0cb.js";import"./index-15c7779c.js";import"./Input-4fb44471.js";const ae={class:"mb-2"},oe={class:"mb-2"},re={class:"mb-2"},le={class:"flex mb-2"},ce={class:"mr-2"},ue={class:"flex mb-2 text-green-500"},de={class:"mr-2"},me=S({__name:"match",props:{dateTime:null,leagueName:null,tiCaiTeamList:null,num:null,extraTeamList:null},setup(L){const e=L;return T(()=>{if(!e.dateTime)return"";try{const v=["周日","周一","周二","周三","周四","周五","周六"],u=H(e.dateTime,"YYYY-MM-DD HH:mm").day();return v[u]}catch(v){return v.message}}),(v,u)=>{var o,t,n,r;return c(),x("div",null,[m("div",ae,p(e==null?void 0:e.num),1),m("div",oe,p(e==null?void 0:e.dateTime),1),m("div",re,p(e==null?void 0:e.leagueName),1),m("div",le,[m("div",ce,p((o=e==null?void 0:e.tiCaiTeamList)==null?void 0:o[0]),1),m("div",null,p((t=e==null?void 0:e.tiCaiTeamList)==null?void 0:t[1]),1)]),m("div",ue,[m("div",de,p((n=e==null?void 0:e.extraTeamList)==null?void 0:n[0]),1),m("div",null,p((r=e==null?void 0:e.extraTeamList)==null?void 0:r[1]),1)])])}}}),ve={key:1,class:"p-1"},y=S({__name:"highlight",props:{content:null,index:null},setup(L){const e=L,v=["hsl(0, 100%, 50%)","hsl(10, 80%, 10%)","hsl(20, 50%, 50%)","rgb(20,200,20)","rgb(40,40,250)","rgb(200,10,160)","hsl(60,70%, 40%)","hsl(100,80%, 20%)","hsl(190, 90%, 50%)","hsl(270, 100%, 40%)","hsl(160, 40%, 50%)","hsl(120, 20%, 30%)"],u=T(()=>{if(Array.isArray(e.index)){const o=e.index;return"linear-gradient(to right,"+e.index.map((t,n)=>`${v[t]} ${n*100/o.length}% ${(n+1)*100/o.length}%`).join(",")+")"}return v[e.index]||""});return(o,t)=>(c(),x("div",null,[l(u)?(c(),x("div",{key:0,style:P({background:l(u)}),class:"text-white p-1"},p(e.content),5)):(c(),x("div",ve,p(e.content),1))]))}});var Y=(L=>(L.noSale="100",L))(Y||{});const _e={class:"flex"},fe={class:"flex"},xe={key:1},Le={class:"flex"},pe={key:1},he=S({__name:"tiCai",props:{itemList:null,revList:null,scoreRevList:null},setup(L){const e=L,v=T(()=>e.itemList.filter(t=>t.oddsTitle==="让球").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===Y.noSale?"未开售":t[0]}))),u=T(()=>e.itemList.filter(t=>t.oddsTitle==="总分").map(t=>t.oddsItemList).flat().map(t=>({win:parseFloat(t[1]),lose:parseFloat(t[2]),scoreTitle:t[0]===Y.noSale?"未开售":t[0]}))),o=[{title:"让球",dataIndex:"scoreTitle",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:t,index:n}){var a,d,f,h;return((d=(a=e.revList)==null?void 0:a[0])==null?void 0:d.tiCaiType)==="win"&&t.scoreTitle===((h=(f=e.revList)==null?void 0:f[0])==null?void 0:h.tiCaiScore)&&t.win===parseFloat(e.revList[0].a)?w(y,{index:0,content:t.win.toFixed(2)}):t.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:t,index:n}){var a,d,f,h;return((d=(a=e.revList)==null?void 0:a[0])==null?void 0:d.tiCaiType)==="lose"&&t.scoreTitle===((h=(f=e.revList)==null?void 0:f[0])==null?void 0:h.tiCaiScore)&&t.lose===parseFloat(e.revList[0].a)?w(y,{index:0,content:t.lose.toFixed(2)}):t.lose.toFixed(2)}}];return(t,n)=>(c(),x("div",null,[g(l(j),{dataSource:l(v),columns:o,pagination:!1},null,8,["dataSource"]),m("div",_e,[(c(!0),x(W,null,E(l(u),r=>{var a,d,f,h,C,R,I,D,M,V,i,_;return c(),x("div",null,[m("div",null,"总分："+p(r.scoreTitle),1),m("div",fe,[$(" 大   ： "),((d=(a=e.scoreRevList)==null?void 0:a[0])==null?void 0:d.tiCaiType)==="win"&&((h=(f=e.scoreRevList)==null?void 0:f[0])==null?void 0:h.tiCaiScore)===r.scoreTitle&&parseFloat((R=(C=e.scoreRevList)==null?void 0:C[0])==null?void 0:R.a)===r.win?(c(),A(y,{key:0,index:4,content:r.win.toFixed(2)},null,8,["content"])):(c(),x("span",xe,p(r.win.toFixed(2)),1))]),m("div",Le,[$(" 小   ： "),((D=(I=e.scoreRevList)==null?void 0:I[0])==null?void 0:D.tiCaiType)==="lose"&&((V=(M=e.scoreRevList)==null?void 0:M[0])==null?void 0:V.tiCaiScore)===r.scoreTitle&&parseFloat((_=(i=e.scoreRevList)==null?void 0:i[0])==null?void 0:_.a)===r.lose?(c(),A(y,{key:0,index:4,content:r.lose.toFixed(2)},null,8,["content"])):(c(),x("span",pe,p(r.lose.toFixed(2)),1))])])}),256))])]))}}),ge=S({__name:"ball",props:{itemList:null,revList:null},setup(L){const e=L,v=T(()=>e.itemList.filter(o=>o.oddsTitle==="让球").map(o=>{const t=o.oddsItemList;return{scoreText:t[0][0],win:parseFloat(t[0][1]),lose:parseFloat(t[0][2])}})),u=[{title:"让球",dataIndex:"scoreText",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:o,index:t}){var r,a,d,f;return((a=(r=e.revList)==null?void 0:r[0])==null?void 0:a.extraType)==="win"&&o.scoreText===((f=(d=e.revList)==null?void 0:d[0])==null?void 0:f.extraScore)&&o.win===parseFloat(e.revList[0].b)?w(y,{index:0,content:o.win.toFixed(2)}):o.win.toFixed(2)}},{title:"负",dataIndex:"lose",customRender({record:o,index:t}){var r,a,d,f;return((a=(r=e.revList)==null?void 0:r[0])==null?void 0:a.extraType)==="lose"&&o.scoreText===((f=(d=e.revList)==null?void 0:d[0])==null?void 0:f.extraScore)&&o.lose===parseFloat(e.revList[0].b)?w(y,{index:0,content:o.lose.toFixed(2)}):o.lose.toFixed(2)}}];return(o,t)=>(c(),x("div",null,[g(l(j),{dataSource:l(v),columns:u,pagination:!1},null,8,["dataSource"])]))}}),Te={class:"flex"},we={class:"mr-1.5rem"},ye={class:"flex"},Re={key:1},be={class:"flex"},Fe={key:1},ke=S({__name:"extra",props:{teamList:null,itemList:null,revList:null,scoreRevList:null},setup(L){const e=L,v=T(()=>e.itemList.filter(u=>u.oddsTitle==="总分").map(u=>u.oddsItemList.map(o=>({title:o[0],win:parseFloat(o[1]),lose:parseFloat(o[2])}))).flat());return(u,o)=>(c(),x("div",null,[g(ge,{itemList:e.itemList,revList:e.revList},null,8,["itemList","revList"]),m("div",Te,[(c(!0),x(W,null,E(l(v),t=>{var n,r,a,d,f,h,C,R,I,D,M,V;return c(),x("div",we,[m("div",null,"总分："+p(t.title),1),m("div",ye,[$(" 大   ： "),((r=(n=e.scoreRevList)==null?void 0:n[0])==null?void 0:r.extraType)==="win"&&((d=(a=e.scoreRevList)==null?void 0:a[0])==null?void 0:d.extraScore)===t.title&&parseFloat((h=(f=e.scoreRevList)==null?void 0:f[0])==null?void 0:h.b)===t.win?(c(),A(y,{key:0,index:4,content:t.win.toFixed(2)},null,8,["content"])):(c(),x("span",Re,p(t.win.toFixed(2)),1))]),m("div",be,[$(" 小   ： "),((R=(C=e.scoreRevList)==null?void 0:C[0])==null?void 0:R.extraType)==="lose"&&((D=(I=e.scoreRevList)==null?void 0:I[0])==null?void 0:D.extraScore)===t.title&&parseFloat((V=(M=e.scoreRevList)==null?void 0:M[0])==null?void 0:V.b)===t.lose?(c(),A(y,{key:0,index:4,content:t.lose.toFixed(2)},null,8,["content"])):(c(),x("span",Fe,p(t.lose.toFixed(2)),1))])])}),256))])]))}}),$e={key:0},Se=m("div",null,"让球",-1),Ce={key:1},Ie=m("div",null,"总分",-1),De=S({__name:"rev",props:{revList:null,scoreRevList:null},setup(L){const e=L,v=T(()=>e.revList),u=T(()=>e.scoreRevList),o=[{title:"GC",dataIndex:"GC",customRender({record:n}){return n.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:n}){return n.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:n}){return n.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:n,index:r}){return w(y,{index:r,content:n.rev.toFixed(2)})}}],t=[{title:"GC",dataIndex:"GC",customRender({record:n}){return n.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:n}){return n.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:n}){return n.offset.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:n,index:r}){return w(y,{index:r+4,content:n.rev.toFixed(2)})}}];return(n,r)=>{var a,d;return c(),x("div",null,[(a=l(v))!=null&&a.length?(c(),x("div",$e,[Se,g(l(j),{columns:o,dataSource:l(v),pagination:!1},null,8,["dataSource"])])):K("",!0),(d=l(u))!=null&&d.length?(c(),x("div",Ce,[Ie,g(l(j),{columns:t,dataSource:l(u),pagination:!1},null,8,["dataSource"])])):K("",!0)])}}}),Me={class:"flex flex-wrap mb-2"},Ve=S({__name:"messageDraw",props:{message1List:null,drawerVisible:{type:Boolean}},setup(L){const e=L,v=O(!1),u=n=>n.split(" "),o=()=>{v.value=!1};Z(()=>e.drawerVisible,()=>{v.value=e.drawerVisible,console.log(v.value,"_drawerVisible.value")},{immediate:!0});const t=["#78a5de","#4fb2a1","#205a13","#186174","#88b00b","#cf4b22","#9e57cd","#238910","#c18fde","#673b84","#760bbb","#557766","#557733","#337755"];return(n,r)=>(c(),A(l(ne),{width:"840",placement:"right",closable:!0,visible:v.value,mask:!0,onClose:o},{default:N(()=>[g(l(Q),{"item-layout":"horizontal","data-source":L.message1List},{renderItem:N(({item:a})=>[m("div",Me,[(c(!0),x(W,null,E(u(a),(d,f)=>(c(),x("div",{style:P({color:t[f],margin:"0 4px"}),class:"whitespace-nowrap"},p(d),5))),256))])]),_:1},8,["data-source"])]),_:1},8,["visible"]))}}),He=m("div",{class:"bg-white"}," ",-1),Ne=m("div",{class:"bg-gray-100"}," ",-1),Be={class:"mx-4"},Oe={class:"flex flex-col"},Ue=S({__name:"index",setup(L){const e=se(),v=ie(),u=O([]),o=T(()=>a.value===0?u.value.sort((i,_)=>H(i.dateTime,"MM-DD HH:ss").valueOf()-H(_.dateTime,"MM-DD HH:ss").valueOf()):a.value===1?u.value.sort((i,_)=>{var s,b,F,k;return(((b=(s=_.revList)==null?void 0:s[0])==null?void 0:b.rev)||0)-(((k=(F=i.revList)==null?void 0:F[0])==null?void 0:k.rev)||0)}):a.value===2?u.value.sort((i,_)=>{var s,b,F,k;return(((b=(s=_.scoreRevList)==null?void 0:s[0])==null?void 0:b.rev)||0)-(((k=(F=i.scoreRevList)==null?void 0:F[0])==null?void 0:k.rev)||0)}):u.value.sort((i,_)=>H(i.dateTime,"MM-DD HH:ss").valueOf()-H(_.dateTime,"MM-DD HH:ss").valueOf()));let t;const n=O(),r=T(()=>{var i;return((i=n.value)==null?void 0:i.message1List)||[]}),a=O(1),d=T(()=>a.value===0?"用rev排序":a.value===1?"用总分排序":a.value===2?"用时间排序":""),f=O(!1),h={pageSize:300};async function C(){var b,F,k,U,q,J;if(v.path!=="/basketball")return!1;const i=location.origin,s=await(await fetch(`${i}/basketballData/?p=${B.password}&token=${B.token}`)).json();if(s.code!==200){if(z.error((s==null?void 0:s.msg)||"更新出错",20),(s==null?void 0:s.code)===619)return z.info("已停止数据自动更新",10),!1;if((s==null?void 0:s.code)===500&&(b=s==null?void 0:s.data)!=null&&b.token&&(localStorage.setItem("token",(F=s==null?void 0:s.data)==null?void 0:F.token),B.token=(k=s==null?void 0:s.data)==null?void 0:k.token),(s==null?void 0:s.code)===601)return z.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(s.code===401)return B.password="",localStorage.setItem("ps",""),B.token="",localStorage.setItem("token",""),console.log("goto login"),e.push({path:"/login"}),!1}return(U=s.data)!=null&&U.matchData&&(z.success(`数据更新 ${(q=s==null?void 0:s.data)!=null&&q.timestamp?"距离当前"+(H().valueOf()-H(s.data.timestamp).valueOf())/1e3+"秒":""}, 在线人数${((J=s==null?void 0:s.data)==null?void 0:J.liveCount)||0}`,5),u.value=s.data.matchData,n.value=s.data,localStorage.setItem("token",s.data.token),B.token=s.data.token),!0}async function R(i,_){try{if(!await i())return}catch{}t=setTimeout(async()=>{try{await R(i,_)}catch{}},_)}ee(async()=>{R(async()=>document.hidden?!0:await C(),5*1e3)}),te(()=>{t&&clearTimeout(t)});const I=()=>{if(a.value===0){a.value=1;return}if(a.value===1){a.value=2;return}if(a.value===2){a.value=0;return}return 0},D=()=>{e.push({path:"/setting"})},M=(i,_)=>["bg-white","bg-gray-100"][_%2],V=[{title:"赛事",customRender({record:i}){return w(me,{dateTime:i.dateTime,tiCaiTeamList:i.tiCaiTeamList,extraTeamList:i.extraTeamList,leagueName:i.league,num:i.num})}},{title:"体彩",customRender({record:i}){return w(he,{teamList:i.tiCaiTeamList,itemList:i.tiCaiItemList,revList:i.revList,scoreRevList:i.scoreRevList})}},{title:"外部",customRender({record:i}){return w(ke,{teamList:i.extraTeamList,itemList:i.extraItemList.filter(_=>["让球","总分","独赢"].includes(_.oddsTitle)),revList:i.revList,scoreRevList:i.scoreRevList})}},{title:"Rev",customRender({record:i}){return w(De,{revList:i.revList,scoreRevList:i.scoreRevList})}}];return(i,_)=>(c(),x("div",null,[He,Ne,m("div",Be,[g(l(j),{dataSource:l(o),columns:V,bordered:"",rowClassName:M,pagination:h},null,8,["dataSource"])]),g(Ve,{"drawer-visible":f.value,"message1-list":l(r)},null,8,["drawer-visible","message1-list"]),g(l(X),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:N(()=>[m("div",Oe,[g(l(G),{type:"primary",onClick:_[0]||(_[0]=()=>f.value=!0),class:"my-2"},{default:N(()=>[$(" 消息")]),_:1}),g(l(G),{type:"primary",onClick:I,class:"my-2"},{default:N(()=>[$(p(l(d)),1)]),_:1}),g(l(G),{class:"my-2",onClick:D},{default:N(()=>[$(" 设置")]),_:1}),g(l(G),{class:"my-2",onClick:_[1]||(_[1]=s=>l(e).push("/"))},{default:N(()=>[$(" 足球")]),_:1})])]),_:1})]))}});export{Ue as default};
