import{d as M,L as W,A as Z}from"./index-68adac58.js";import{d as O,g as w,o,c as u,a as d,t as x,u as r,n as D,b as f,F as T,h as b,i as $,j as A,s as S,r as k,k as tt,l as et,w as C,e as z,f as st,m as nt,p as B}from"./index-55927906.js";import{T as V,D as it}from"./index-73bc09e3.js";import{D as Y}from"./index-aa0beafb.js";import{B as H}from"./button-b464f006.js";import"./SearchOutlined-3054f0cb.js";import"./index-15c7779c.js";import"./Input-4fb44471.js";const at={class:"mb-2"},rt={class:"mb-2"},lt={class:"mb-2"},ot={class:"flex mb-2"},ut={class:"mr-2"},ct={class:"flex mb-2 text-green-500"},dt={class:"mr-2"},mt=O({__name:"match",props:{dateTime:null,leagueName:null,tiCaiTeamList:null,num:null,extraTeamList:null},setup(g){const s=g;return w(()=>{if(!s.dateTime)return"";try{const _=["周日","周一","周二","周三","周四","周五","周六"],h=M(s.dateTime,"YYYY-MM-DD HH:mm").day();return _[h]}catch(_){return _.message}}),(_,h)=>{var i,c,n,e;return o(),u("div",null,[d("div",at,x(s==null?void 0:s.num),1),d("div",rt,x(s==null?void 0:s.dateTime),1),d("div",lt,x(s==null?void 0:s.leagueName),1),d("div",ot,[d("div",ut,x((i=s==null?void 0:s.tiCaiTeamList)==null?void 0:i[0]),1),d("div",null,x((c=s==null?void 0:s.tiCaiTeamList)==null?void 0:c[1]),1)]),d("div",ct,[d("div",dt,x((n=s==null?void 0:s.extraTeamList)==null?void 0:n[0]),1),d("div",null,x((e=s==null?void 0:s.extraTeamList)==null?void 0:e[1]),1)])])}}}),vt={key:1,class:"p-1"},F=O({__name:"highlight",props:{content:null,index:null},setup(g){const s=g,_=["hsl(0, 100%, 50%)","hsl(10, 80%, 10%)","hsl(20, 50%, 50%)","rgb(20,200,20)","rgb(40,40,250)","rgb(200,10,160)","hsl(60,70%, 40%)","hsl(100,80%, 20%)","hsl(190, 90%, 50%)","hsl(270, 100%, 40%)","hsl(160, 40%, 50%)","hsl(120, 20%, 30%)"],h=w(()=>{if(Array.isArray(s.index)){const i=s.index;return"linear-gradient(to right,"+s.index.map((c,n)=>`${_[c]} ${n*100/i.length}% ${(n+1)*100/i.length}%`).join(",")+")"}return _[s.index]||""});return(i,c)=>(o(),u("div",null,[r(h)?(o(),u("div",{key:0,style:D({background:r(h)}),class:"text-white p-1"},x(s.content),5)):(o(),u("div",vt,x(s.content),1))]))}});var E=(g=>(g.noSale="100",g))(E||{});const ft={class:"flex"},xt={class:"mr-4 mb-2"},ht={class:"flex mr-4 mb-2"},_t={class:"mr-1"},Lt={class:"mr-4 mb-2"},pt={class:"flex mr-4 mb-2"},gt={class:"mr-1"},Rt=O({__name:"tiCai",props:{itemList:null,revList:null,scoreRevList:null,halfRevList:null},setup(g){const s=g,_=w(()=>{var n,e;return(((e=(n=s.itemList.filter(t=>t.oddsTitle==="胜平负"))==null?void 0:n[0])==null?void 0:e.oddsItemList)||[]).map(t=>({score:parseFloat(t[0]),scoreTitle:t[0]===E.noSale?"未开售":t[0],win:parseFloat(t[1]),draw:parseFloat(t[2]),lose:parseFloat(t[3])}))}),h=w(()=>s.itemList.filter(n=>n.oddsTitle==="得分").map(n=>({title:n.oddsTitle,itemList:n.oddsItemList.map(e=>{const t=s.scoreRevList.findIndex(m=>e[0]===m.tiCai&&parseFloat(e[1])===m.tiCaiOdds);return{index:t===-1?-1:t+2,content:e}})}))),i=w(()=>s.itemList.filter(n=>n.oddsTitle==="半场").map(n=>({title:n.oddsTitle,itemList:n.oddsItemList.map(e=>{const t=s.halfRevList.findIndex(m=>e[0]===m.tiCai);return{index:t===-1?-1:t+4,content:e}})}))),c=[{title:"让球",dataIndex:"scoreTitle",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:n}){const e=s.revList.map((t,m)=>[t,m]).filter(([t,m])=>t.tiCai===n.score&&t.tiCaiOdds===n.win&&t.type==="win").map(t=>t[1]);return e.length?$(F,{content:n.win,index:e}):n.win}},{title:"平",dataIndex:"draw"},{title:"负",dataIndex:"lose",customRender({record:n}){const e=s.revList.map((t,m)=>[t,m]).filter(([t,m])=>t.tiCai===n.score&&t.tiCaiOdds===n.lose&&t.type==="lose").map(t=>t[1]);return e.length?$(F,{content:n.lose,index:e}):n.lose}}];return(n,e)=>(o(),u("div",null,[f(r(V),{dataSource:r(_),columns:c,pagination:!1},null,8,["dataSource"]),d("div",ft,[(o(!0),u(T,null,b(r(h),t=>(o(),u("div",null,[d("div",xt,x(t.title),1),(o(!0),u(T,null,b(t.itemList,m=>(o(),u("div",ht,[d("div",_t,[d("div",null,x(m.content[0]),1),f(F,{content:m.content[1],index:m.index},null,8,["content","index"])])]))),256))]))),256)),(o(!0),u(T,null,b(r(i),t=>(o(),u("div",null,[d("div",Lt,x(t.title),1),(o(!0),u(T,null,b(t.itemList,m=>(o(),u("div",pt,[d("div",gt,[d("div",null,x(m.content[0]),1),f(F,{content:m.content[1],index:m.index},null,8,["content","index"])])]))),256))]))),256))])]))}}),yt=O({__name:"ball",props:{itemList:null,revList:null,halfRevList:null},setup(g){const s=g,_=w(()=>s.itemList.map(i=>{const c=i.oddsItemList;return i.oddsTitle==="独赢"?{score:0,scoreText:"独赢",win:parseFloat(c[0][0]),draw:parseFloat(c[2][0]),lose:parseFloat(c[1][0])}:{scoreText:c[0][0],score:parseFloat(c[0][0]),win:parseFloat(c[0][1]),draw:"-",lose:parseFloat(c[1][1])}})),h=[{title:"让球",dataIndex:"scoreText",minWidth:48},{title:"胜",dataIndex:"win",customRender({record:i}){const c=s.revList.map((e,t)=>[e,t]).filter(([e,t])=>i.scoreText==="独赢"?e.extraOdds===i.win&&e.isOnlyWin&&e.type==="lose":e.extra===i.score&&e.extraOdds===i.win&&e.type==="lose"&&!e.isOnlyWin).map(e=>e[1]),n=s.halfRevList.map((e,t)=>[e,t]).filter(([e,t])=>e.extra===i.scoreText&&e.type==="lose"&&!e.isOnlyWin).map(e=>e[1]+4);return[...c,...n].length?$(F,{content:i.win,index:[...c,...n]}):i.win}},{title:"平",dataIndex:"draw"},{title:"负",dataIndex:"lose",customRender({record:i}){const c=s.revList.map((e,t)=>[e,t]).filter(([e,t])=>i.scoreText==="独赢"?e.extraOdds===i.lose&&e.isOnlyWin&&e.type==="win":e.extra===i.score&&e.extraOdds===i.lose&&e.type==="win"&&!e.isOnlyWin).map(e=>e[1]),n=s.halfRevList.map((e,t)=>[e,t]).filter(([e,t])=>e.extra===i.scoreText&&e.type==="win"&&!e.isOnlyWin).map(e=>e[1]+4);return[...c,...n].length?$(F,{content:i.lose,index:[...c,...n]}):i.lose}}];return(i,c)=>(o(),u("div",null,[f(r(V),{dataSource:r(_),columns:h,pagination:!1},null,8,["dataSource"])]))}}),It={class:"flex"},wt={class:"mr-4 mb-2"},Tt={class:"flex mr-4 mb-2"},bt={class:"mr-1"},$t=O({__name:"extra",props:{teamList:null,itemList:null,revList:null,scoreRevList:null,halfRevList:null},setup(g){const s=g,_=w(()=>s.itemList.filter(i=>i.oddsTitle==="得分").map(i=>({title:i.oddsTitle,itemList:i.oddsItemList.map(c=>{const n=s.scoreRevList.findIndex(e=>c[0]===e.extra&&parseFloat(c[1])===e.extraOdds);return{index:n===-1?-1:n+2,content:c}}).filter(c=>!!c)}))),h=w(()=>s.itemList.filter(i=>i.oddsTitle==="让球"||i.oddsTitle==="独赢"));return(i,c)=>(o(),u("div",null,[f(yt,{revList:s.revList,halfRevList:s.halfRevList,itemList:r(h),class:"flex-1"},null,8,["revList","halfRevList","itemList"]),d("div",It,[(o(!0),u(T,null,b(r(_),n=>(o(),u("div",null,[d("div",wt,x(n.title),1),(o(!0),u(T,null,b(n.itemList.slice(0,1),e=>(o(),u("div",Tt,[d("div",bt,[d("div",null,x(e.content[0]),1),f(F,{content:e.content[1],index:e.index},null,8,["content","index"])])]))),256))]))),256))])]))}}),Ct={key:0},Ft=d("div",null,"胜平负",-1),St={key:1},kt=d("div",{class:"mt-4"},"得分",-1),Ot={key:2},Dt=d("div",{class:"mt-4"},"半场",-1),Vt=O({__name:"rev",props:{itemList:null,scoreItemList:null,halfItemList:null},setup(g){const s=g,_=w(()=>s.itemList),h=w(()=>s.scoreItemList),i=w(()=>s.halfItemList),c=[{title:"GC",dataIndex:"gc",customRender({record:t}){return t.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:t}){return t.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:t}){return t.offset.toFixed(2)}},{title:"R",dataIndex:"r",customRender({record:t}){return t.r.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:t}){const m=s.itemList.findIndex(I=>I.rev===t.rev&&I.isMatch);return m!==-1&&t.rev>=S.setting.Rev?$(F,{content:t.rev.toFixed(2),index:m}):t.rev.toFixed(2)}}],n=[{title:"GC",dataIndex:"gc",customRender({record:t}){return t.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:t}){return t.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:t}){return t.offset.toFixed(2)}},{title:"R",dataIndex:"r",customRender({record:t}){return t.r.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:t,index:m}){const I=t.rev>=S.setting.scoreRev;return $(F,{content:t.rev.toFixed(2),index:I?m+2:-1})}}],e=[{title:"GC",dataIndex:"gc",customRender({record:t}){return t.gc.toFixed(2)}},{title:"VV",dataIndex:"vv",customRender({record:t}){return t.vv.toFixed(2)}},{title:"Offset",dataIndex:"offset",customRender({record:t}){return t.offset.toFixed(2)}},{title:"R",dataIndex:"r",customRender({record:t}){return t.r.toFixed(2)}},{title:"Rev",dataIndex:"rev",customRender({record:t,index:m}){const I=t.rev>=S.setting.halfRev&&t.rev<1500;return $(F,{content:t.rev.toFixed(2),index:I?m+4:-1})}}];return(t,m)=>{var I,R,N;return o(),u("div",null,[(I=r(_))!=null&&I.length?(o(),u("div",Ct,[Ft,f(r(V),{columns:c,dataSource:r(_),pagination:!1},null,8,["dataSource"])])):A("",!0),(R=r(h))!=null&&R.length?(o(),u("div",St,[kt,f(r(V),{columns:n,dataSource:r(h),pagination:!1},null,8,["dataSource"])])):A("",!0),(N=r(i))!=null&&N.length?(o(),u("div",Ot,[Dt,f(r(V),{columns:e,dataSource:r(i),pagination:!1},null,8,["dataSource"])])):A("",!0)])}}}),Mt=d("div",{class:"bg-white"}," ",-1),Nt=d("div",{class:"bg-gray-100"}," ",-1),Wt={class:"mx-4"},zt={class:"flex flex-wrap mb-2"},Bt={class:"mb-2"},Ht={class:"flex flex-wrap"},jt={class:"flex flex-wrap"},At={class:"flex flex-wrap mb-2"},Yt={class:"flex flex-wrap mb-2"},Gt={class:"flex flex-col"},Zt=O({__name:"index",setup(g){const s=st(),_=nt(),h=["#78a5de","#4fb2a1","#205a13","#186174","#88b00b","#cf4b22","#9e57cd","#238910","#c18fde","#673b84","#760bbb","#557766","#557733","#337755"],i=k([]),c=w(()=>{if(R.value===1)return i.value.sort((l,L)=>{const a=l.revList.reduce((v,p)=>p.isMatch&&p.rev>v?p.rev:v,-1/0);return L.revList.reduce((v,p)=>p.isMatch&&p.rev>v?p.rev:v,-1/0)-a});if(R.value===2)return i.value.sort((l,L)=>{const a=l.scoreRevList.reduce((v,p)=>p.rev>v?p.rev:v,-1/0);return L.scoreRevList.reduce((v,p)=>p.rev>v?p.rev:v,-1/0)-a});if(R.value===0)return i.value.sort((l,L)=>M(l.dateTime,"MM-DD HH:ss").valueOf()-M(L.dateTime,"MM-DD HH:ss").valueOf())}),n=k([]),e=k([]),t=k([]),m=k([]);let I;const R=k(1),N=w(()=>R.value===0?"用rev排序":R.value===1?"用得分排序":R.value===2?"用时间排序":""),j=k(!1),U={pageSize:300};async function q(){var y,v,p;if(console.log(_.path),_.path!=="/home")return!1;const l=location.origin,a=await(await fetch(`${l}/data/?p=${S.password}&token=${S.token}`)).json();if(a.code!==200){if(B.error((a==null?void 0:a.msg)||"更新出错",20),(a==null?void 0:a.code)===619)return B.info("已停止数据自动更新",10),!1;if((a==null?void 0:a.code)===601)return B.info("为了保证账号安全，已停止数据自动更新。刷新页面可开始继续自动更新",10),!1;if(a.code===401)return S.password="",localStorage.setItem("ps",""),S.token="",localStorage.setItem("token",""),console.log("goto login"),s.push({path:"/login"}),!1}return(y=a.data)!=null&&y.matchData&&(B.success(`数据更新 ${(v=a==null?void 0:a.data)!=null&&v.timestamp?"距离当前"+(M().valueOf()-M(a.data.timestamp).valueOf())/1e3+"秒":""}, 在线人数${((p=a==null?void 0:a.data)==null?void 0:p.liveCount)||0}`,5),i.value=a.data.matchData,n.value=a.data.message1List,e.value=a.data.message2List,t.value=a.data.message3List,m.value=a.data.message4List,localStorage.setItem("token",a.data.token),S.token=a.data.token),!0}async function G(l,L){try{if(!await l())return}catch{}I=setTimeout(async()=>{try{await G(l,L)}catch{}},L)}tt(async()=>{G(async()=>document.hidden?!0:await q(),5*1e3)}),et(()=>{I&&clearTimeout(I)});const J=()=>{j.value=!1},K=()=>{if(R.value===0){R.value=1;return}if(R.value===1){R.value=2;return}if(R.value===2){R.value=0;return}return 0},P=()=>{s.push({path:"/setting"})},Q=(l,L)=>["bg-white","bg-gray-100"][L%2],X=[{title:"赛事",customRender({record:l}){return $(mt,{dateTime:l.dateTime,tiCaiTeamList:l.tiCaiTeamList,extraTeamList:l.extraTeamList,leagueName:l.league,num:l.num})}},{title:"体彩",customRender({record:l}){return $(Rt,{teamList:l.tiCaiTeamList,itemList:l.tiCaiItemList,revList:l.revList,scoreRevList:l.scoreRevList,halfRevList:l.halfRevList})}},{title:"外部",customRender({record:l}){return $($t,{teamList:l.extraTeamList,itemList:l.extraItemList.filter(L=>["让球","得分","独赢"].includes(L.oddsTitle)),revList:l.revList,halfRevList:l.halfRevList,scoreRevList:l.scoreRevList})}},{title:"Rev",customRender({record:l}){return $(Vt,{itemList:l.revList,scoreItemList:l.scoreRevList,halfItemList:l.halfRevList})}}];return(l,L)=>(o(),u("div",null,[Mt,Nt,d("div",Wt,[f(r(V),{dataSource:r(c),columns:X,bordered:"",rowClassName:Q,pagination:U},null,8,["dataSource"])]),f(r(it),{width:"840",placement:"right",closable:!0,visible:j.value,mask:!0,onClose:J},{default:C(()=>[f(r(W),{"item-layout":"horizontal","data-source":n.value},{renderItem:C(({item:a})=>[d("div",zt,[(o(!0),u(T,null,b(a.split(" "),(y,v)=>(o(),u("div",{style:D({color:h[v],margin:"0 4px"}),class:"whitespace-nowrap"},x(y),5))),256))])]),_:1},8,["data-source"]),f(r(Y)),f(r(W),{"item-layout":"horizontal","data-source":e.value},{renderItem:C(({item:a})=>[d("div",Bt,[d("div",Ht,[(o(!0),u(T,null,b(a[0].split(" "),(y,v)=>(o(),u("div",{style:D({color:h[v],margin:"0 4px"}),class:"whitespace-nowrap"},x(y),5))),256))]),d("div",jt,[(o(!0),u(T,null,b(a[1].split(" "),(y,v)=>(o(),u("div",{style:D({color:h[v],margin:"0 4px"}),class:"whitespace-nowrap"},x(y),5))),256))])])]),_:1},8,["data-source"]),f(r(Y)),f(r(W),{"item-layout":"horizontal","data-source":t.value},{renderItem:C(({item:a})=>[d("div",At,[(o(!0),u(T,null,b(a.split(" "),(y,v)=>(o(),u("div",{style:D({color:h[v],margin:"0 4px"}),class:"whitespace-nowrap"},x(y),5))),256))])]),_:1},8,["data-source"]),f(r(Y)),f(r(W),{"item-layout":"horizontal","data-source":m.value},{renderItem:C(({item:a})=>[d("div",Yt,[(o(!0),u(T,null,b(a.split(" "),(y,v)=>(o(),u("div",{style:D({color:h[v],margin:"0 4px"}),class:"whitespace-nowrap"},x(y),5))),256))])]),_:1},8,["data-source"])]),_:1},8,["visible"]),f(r(Z),{offsetBottom:400,style:{position:"absolute",right:"0px"}},{default:C(()=>[d("div",Gt,[f(r(H),{type:"primary",onClick:L[0]||(L[0]=()=>j.value=!0),class:"my-2"},{default:C(()=>[z(" 消息")]),_:1}),f(r(H),{type:"primary",onClick:K,class:"my-2"},{default:C(()=>[z(x(r(N)),1)]),_:1}),f(r(H),{class:"my-2",onClick:P},{default:C(()=>[z(" 设置")]),_:1}),f(r(H),{class:"my-2",onClick:L[1]||(L[1]=a=>r(s).push("/basketball"))},{default:C(()=>[z("篮球")]),_:1})])]),_:1})]))}});export{Zt as default};
