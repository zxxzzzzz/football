
edition: 2.0.0
name: ball
access: "default"

resources:
  ball:
    component: fc3
    props: # 组件的属性值
      region: cn-hangzhou # 关于变量的使用方法，可以参考：https://www.serverless-devs.com/serverless-devs/yaml#变量赋值
      functionName: ball
      runtime: nodejs16
      code: ./code
      cpu: 0.3
      handler: index.handler
      memorySize: 512
      diskSize: 512
      description: '球类网站'
      timeout: 60
      instanceConcurrency: 1
      instanceLifecycleConfig:      # 扩展函数
        preStop:                    # PreStop 函数
          handler: index.preStop    # 函数入口
          timeout: 60               # 超时时间
      triggers:
        - triggerName: httpTrigger
          triggerType: http
          triggerConfig:
            authType: anonymous
            methods:
              - GET
              - POST
  ballTrigger: # 按时提醒
    component: fc3 
    props: 
      functionName: trigger
      region: cn-hangzhou
      code: ./code
      runtime: nodejs16
      handler: infoIndex.handler
      instanceConcurrency: 1
      memorySize: 128
      diskSize: 512
      description: '足球定时触发'
      cpu: 0.05
      timeout: 20
      triggers:
        - triggerName: cron-tab-trigger
          triggerType: timer
          triggerConfig:
            payload: ''
            cronExpression: 'CRON_TZ=Asia/Shanghai 0 0/1 * * * ?'
            enable: true
  fc-domain: #  服务名称
    component: fc3-domain
    props: #  组件的属性值
      region: cn-hangzhou
      domainName: auto
      protocol: HTTP # HTTP | HTTPS 
      routeConfig:
        routes:
          - functionName: ball
            methods:
              - GET
            path: /
            qualifier: LATEST
