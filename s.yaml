
edition: 3.0.0
name: ball
access: "default"

resources:
  ball:
    component: fc3
    props: # 组件的属性值
      region: cn-hangzhou # 关于变量的使用方法，可以参考：https://www.serverless-devs.com/serverless-devs/yaml#变量赋值
      functionName: getCacheData
      runtime: nodejs16
      code: ./code
      cpu: 0.3
      handler: index.getCacheData
      memorySize: 512
      diskSize: 512
      description: '球类网站缓存数据'
      timeout: 60
      layers:
        - acs:fc:cn-hangzhou:1048992591952509:layers/ball/versions/2
      instanceConcurrency: 1
      triggers:
        - triggerName: httpTrigger
          triggerType: http
          triggerConfig:
            authType: anonymous
            methods:
              - GET
              - POST
  dataUpdate:
    component: fc3
    props: # 组件的属性值
      region: cn-hangzhou # 关于变量的使用方法，可以参考：https://www.serverless-devs.com/serverless-devs/yaml#变量赋值
      functionName: dataUpdate
      runtime: nodejs16
      code: ./code
      cpu: 0.3
      handler: index.dataUpdate
      memorySize: 512
      diskSize: 512
      description: '数据更新'
      timeout: 60
      layers:
        - acs:fc:cn-hangzhou:1048992591952509:layers/ball/versions/2
      instanceConcurrency: 1
      triggers:
        - triggerName: httpTrigger
          triggerType: http
          triggerConfig:
            authType: anonymous
            methods:
              - GET
  static: # 静态文件服务
    component: fc3 
    props: 
      layers:
        - acs:fc:cn-hangzhou:1048992591952509:layers/ball/versions/2
      functionName: static
      region: cn-hangzhou
      code: ./code
      runtime: nodejs16
      handler: index.static
      instanceConcurrency: 1
      memorySize: 128
      diskSize: 512
      description: '静态服务'
      cpu: 0.1
      timeout: 20
      triggers:
        - triggerName: httpTrigger
          triggerType: http
          triggerConfig:
            authType: anonymous
            methods:
              - GET
  fc-domain: #  服务名称
    component: fc3-domain
    props: #  组件的属性值
      region: cn-hangzhou
      domainName: auto
      protocol: HTTP # HTTP | HTTPS 
      routeConfig:
        routes:
          - functionName: getCacheData
            methods:
              - POST
              - GET
            path: /data/*
            qualifier: LATEST
          - functionName: dataUpdate
            methods:
              - GET
            path: /dataUpdate
            qualifier: LATEST
          - functionName: static
            methods:
              - GET
            path: /*
            qualifier: LATEST
